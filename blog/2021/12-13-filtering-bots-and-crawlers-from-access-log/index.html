<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<link href="data:image/x-icon;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABbklEQVQ4T2OUn/2+loGRoZqR4T87AwngPwPjT4b/DK2M8nPe/yBVM8wekCGMCnPe/SfBYgylKAYk67AzMCEp2ff4N4O+KAvDtz//GXY8+M1gKcnCoCHEzDD/6k+4KhQD7iQKMDAyMjD8h7qp6OBXhgx9DoZX3/4zJOz8wrDMk4eBn52RwXvDZ9wGgExvPfUdrmBbIC/YgKojXxkOhvEzzLz0g6Hn7A/SDPj48z/Dz7//GcwlWBmc1nxkeP4VEWwYXgB6l+EnkJh75QfDpAs/GUAu0BRiYfgH9FfZoa8Ma+/8RglIDAMuvfnLcPTZb4aTz/8wHHn2B8WAEqAB6wkZgC0MQF74/ZeBwUSChcFp9UeGF8AwgQEMF+AKxNpjXxn2h/AzTAcGYi++QMQXjSu8eBh42fBEY7ouOzgdwMDeR78ZDKAJaev93wzWUiwMWsCENPsKjoRETpKmPDOBsjPQ2dXABExSdmYA5kRg0mgFAI5W3Y01yGITAAAAAElFTkSuQmCC" rel="icon" type="image/x-icon">

	<link rel="canonical" href="https://eklausmeier.goip.de/blog/2021/12-13-filtering-bots-and-crawlers-from-access-log">
	<link rel="alternate" type="application/rss+xml" title="RSS" href="https://eklausmeier.goip.de/feed.xml">
	<meta name="author" content="Elmar Klausmeier">
	<meta name="copyright" content="Elmar Klausmeier">
	<meta name="generator" content="Simplified Saaze">

<script src="https://analytics.ahrefs.com/analytics.js" data-key="yTUhMMEASRjeaM8armGiZQ" async></script>

	<title>Filtering Bots and Crawlers from Access.log - Elmar Klausmeier's Blog on Computers, Programming, and Mathematics</title>

	<link href="/jscss/prism.css" rel=stylesheet>
<style>
/* CSS for Elmar Klausmeier's blog
   09-Aug-2021: Initial revision
   25-Aug-2021: Added transformed anchor a
   27-Jun-2022: dark/light switcher, see https://ihuoma.hashnode.dev/darklight-mode-switcher
   11-Jul-2022: p+ul+ol same font
   09-Aug-2022: fixed <a...> on tablets, removed commented-out stuff
   28-May-2023: centered content, added background color
   16-Oct-2023: added Google fonts
   23-Oct-2023: added pagefind dark mode
   16-Nov-2023: added kbd
   04-Nov-2024: centered tables, aside on the left side
*/

@import url("https://fonts.googleapis.com/css2?family=Merriweather:ital,wght@0,400;0,700;1,400;1,700&family=Noto+Sans+Mono:wght@400;700&family=UnifrakturMaguntia&display=swap");

:root { --bgSurrounding:#fffff6; --bgAcolor:white; color:black; --h1Color:DarkBlue; --thColor:LightBlue; --nthChild:#f2f2f2; --klmwidth:46rem; }
.dark-mode { background-color:#22160B; color:white; --bgAcolor:black; --h1Color:LightBlue; --thColor:DarkBlue; --nthChild:#935116;
	--pagefind-ui-primary: #eeeeee; --pagefind-ui-text: #eeeeee; --pagefind-ui-background: #152028; --pagefind-ui-border: #152028; --pagefind-ui-tag: #152028;
}
body {
	background-color: var(--bgSurrounding);
	font-family:Merriweather,Georgia,"Times New Roman",ui-serif,Cambria,Times,serif;
	font-display:optional;
	/*font-size: 28px;  font-weight: 100;*/
	margin: auto;
	width:var(--klmwidth)
}
h1::first-letter, h2::first-letter { font-family:UnifrakturMaguntia; color:brown }
article, aside { background-color: var(--bgAcolor); border-radius:8px }

a { color:inherit }
a:hover { background-color:sandybrown }
strong { font-weight:900 }
.symbols { font-family:'Noto Sans Symbols 2'; font-size:36px }


img[alt=Photo] { width:var(--klmwidth) }

table { margin-left:auto; margin-right:auto }
img { border-radius:8px; margin-left:auto; margin-right:auto; display:block }
blockquote { font-style:italic; padding-left:0.4rem; border-left:2px solid #ccc }
td { border:1px solid Black; border-collapse:collapse; padding:0.3rem 0.5rem 0.3rem 0.5rem }
th { border:1px solid Black; background-color:var(--thColor); padding:0.3rem 0.5rem 0.3rem 0.5rem; position:sticky; top:0 }
tr:nth-child(even) { background-color:var(--nthChild); }

kbd {   /* https://www.rgagnon.com/jsdetails/js-nice-effect-the-KBD-tag.html */
	margin: 0px 0.1em;
	padding: 0.1em 0.6em;
	border-radius: 3px;
	border: 1px solid rgb(204, 204, 204);
	color: rgb(51, 51, 51);
	line-height: 1.4;
	font-family: Arial,Helvetica,sans-serif;
	font-size: 16px;
	display: inline-block;
	box-shadow: 0px 1px 0px rgba(0,0,0,0.2), inset 0px 0px 0px 2px #ffffff;
	background-color: rgb(247, 247, 247);
	-moz-box-shadow: 0 1px 0px rgba(0, 0, 0, 0.2), 0 0 0 2px #ffffff inset;
	-webkit-box-shadow: 0 1px 0px rgba(0, 0, 0, 0.2), 0 0 0 2px #ffffff inset;
	-moz-border-radius: 3px;
	-webkit-border-radius: 3px;
	text-shadow: 0 1px 0 #fff;
}

@media screen and (min-width:50rem) {
	main, aside { max-width:46rem }
	h1 { font-size:3em; color:var(--h1Color) }
	h2 { font-size:2.7em; color:var(--h1Color) }
	h3 { font-size:2.2em; color:var(--h1Color) }
	h4 { font-size:2em; color:var(--h1Color) }
	p { line-height:1.7; font-size:1.3rem }
	blockquote { line-height:1.5; font-size:1.3rem }
	ul, ol { line-height:1.5; font-size:1.3rem }
	li { margin-bottom:0.6rem }
	pre { color:#e2e8f0; background-color:#2d3748; border-radius:0.4rem; overflow-x:auto; padding:1.4rem }
	pre code { color:#e2e8f0; line-height:1.8; font-size:1.1rem; font-weight:400; }
	code[class*="language-"], pre[class*="language-"] { line-height:1.5; font-size:1.15rem }
}
@media screen and (max-width:50rem) {
	main, aside, header, footer { max-width:46rem; margin-left:0.3rem; margin-right:0.3rem }
	/*body { width:100% }*/
	h1 { font-size:2.2em; color:var(--h1Color) }
	h2 { font-size:1.7em; color:var(--h1Color) }
	h3 { font-size:1.4em; color:var(--h1Color) }
	h4 { font-size:1.2em; color:var(--h1Color) }
	p { line-height:1.5; font-size:1.0rem }
	ul, ol { line-height:1.4; font-size:1.0rem }
	li { margin-bottom:0.4rem }
	pre { color:#e2e8f0; background-color:#2d3748; border-radius:0.4rem; overflow-x:auto }
	pre code { color:#e2e8f0; line-height:1.3; font-size:1em }
}
@media screen and (max-width:46rem) {
	body, main, aside, header, footer { max-width:45rem; margin-left:0.3rem; margin-right:0.3rem }
}
@media screen and (max-width:34rem) {
	body, main, aside, header, footer { max-width:33rem; margin-left:0.3rem; margin-right:0.3rem }
}
@media screen and (max-width:24rem) {
	body, main, aside, header, footer { max-width:23rem; margin-left:0.3rem; margin-right:0.3rem }
}
@media screen and (max-width:20rem) {
	body, main, aside, header, footer { max-width:19rem; margin-left:0.3rem; margin-right:0.3rem }
}

.dimmedColor { color:Gray }
footer { font-family:sans-serif; color:Gray }
.chartarea { height:400px; width:600px }

/* Copied from TailwindCSS 2.0 typography.min.css */
pre, code { font-family:"Noto Sans Mono" }
code { color:inherit; font-weight:700; font-size:inherit }
code::before { content:"`" }
code::after { content:"`" }
pre > code { font-weight:400 }
pre code::before { content:"" }
pre code::after{ content:"" }


nav { border-radius:8px }
/* Copied from W.S.Toh: https://code-boxx.com/simple-responsive-pure-css-hamburger-menu */
#hamnav {	/* [ON BIG SCREENS] (A) WRAPPER */
	/*width: var(--klmwidth);*/
	background: Lightgray;
	/* Optional */
	position: sticky;
	top: 0;
}

#hamitems { display:flex }	/* (B) HORIZONTAL MENU ITEMS */
#hamitems a {
	flex-grow: 2;
	/*flex-basis: 0;*/
	padding: 12px;
	/*color: white;*/
	text-decoration: none;
	margin-left: 0rem;
	text-align: left;
	font-size:1.6rem;
}
/*#hamitems a:hover { background:Sandybrown }*/

#hamnav label, #hamburger { display:none }	/* (C) HIDE HAMBURGER */

.grid-container {	/* Holy Grail Layout */
	display:grid;
	grid-template-areas:
		'header'
		'main'
		'aside'
		'footer';
	gap: 0.1rem;
	justify-content:center;
	text-wrap:wrap;
	text-align:left;
}

header { grid-area:header }
main { grid-area:main }
aside { grid-area:aside; background-color:moccasin }
footer { grid-area:footer }

@media screen and (min-width:95rem) {
	.grid-container {
		display: grid;
		width: 100%;
		grid-template-columns: 40rem 47rem;
		grid-template-areas:
			'header header'
			'aside main'
			'footer footer';
		gap: 2rem 4rem;
		background-color: var(--bgSurrounding);
		padding: 0.8rem;
	}
}

@media screen and (max-width: 50rem) {	/* [ON SMALL SCREENS] */
	#hamitems a {	/* (A) BREAK INTO VERTICAL MENU */
		box-sizing: border-box;
		display: block;
		/*width: 100%;*/
		border-top: 1px solid #333;
	}
	#hamnav label {	/* (B) SHOW HAMBURGER ICON */
		display: inline-block;
		color: white;
		background: DarkGreen;	/*#a02620;*/
		font-style: normal;
		font-size: 1.2em;
		padding: 10px;
	}
	#hamitems { display:none }	/* (C) TOGGLE SHOW/HIDE MENU */
	#hamnav input:checked ~ #hamitems { display:block }
}



</style>

<link href="/pagefind/pagefind-ui.css" rel="stylesheet">
<script src="/pagefind/pagefind-ui.js"></script>
<script>
	window.addEventListener('DOMContentLoaded', (event) => {
		new PagefindUI({ element: "#search", showSubResults: true });
	});
</script>

</head>

<body class=grid-container>

	<header> 
		<nav id=hamnav>	<!-- (A) MENU WRAPPER -->
		<label for=hamburger>&#9776;</label><!-- (B) THE HAMBURGER -->
			<input type=checkbox id=hamburger>
		<div id=hamitems>	<!-- (C) MENU ITEMS -->
			<a href="/blog">Blog</a>
			<a href="/aux/about">About</a>
			<a href="/music" aria-label="Music"><svg version="1.1" id="musicIcon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height=32 width=32 x="0px" y="0px" viewBox="0 0 104.23 122.88" style="enable-background:new 0 0 104.23 122.88; fill:Navy" xml:space="preserve"><style type="text/css">.st0{fill-rule:evenodd;clip-rule:evenodd;}</style><g><path class="st0" d="M87.9,78.04c2.74-0.48,5.33-0.4,7.6,0.13V24.82L39.05,41.03v61.95c0.03,0.34,0.05,0.69,0.05,1.03 c0,0,0,0.01,0,0.01c0,8.34-8.75,16.62-19.55,18.49C8.76,124.37,0,119.12,0,110.77c0-8.34,8.76-16.62,19.55-18.48 c4.06-0.7,7.84-0.39,10.97,0.71l0-76.26h0.47L104.04,0v85.92c0.13,0.63,0.2,1.27,0.2,1.91c0,0,0,0,0,0.01 c0,6.97-7.32,13.89-16.33,15.44c-9.02,1.56-16.33-2.83-16.33-9.8C71.57,86.51,78.88,79.59,87.9,78.04L87.9,78.04L87.9,78.04z"/></g></svg></a>
			<a href="/gallery" aria-label="Gallery"><svg version="1.1" id="galleryIcon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height=32 width=32 x="0px" y="0px" viewBox="0 0 122.88 90.78" style="enable-background:new 0 0 122.88 90.78; fill:black" xml:space="preserve"><style type="text/css">.st0{fill-rule:evenodd;clip-rule:evenodd;}</style><g><path class="st0" d="M46.86,0.05h43.63l9.94,17.7h20.48c1.09,0,1.98,0.92,1.98,1.98v69.08c0,1.06-0.91,1.98-1.98,1.98H1.98 C0.92,90.78,0,89.89,0,88.81l0-69.08c0-1.09,0.89-1.98,1.98-1.98h9.21V11.4h11.38v6.35h12.36c2.57-5.08,5.14-10.15,7.71-15.23 C44.2-0.57,43.34,0.05,46.86,0.05L46.86,0.05z M110.07,26.5c3.26,0,5.9,2.64,5.9,5.9c0,3.26-2.64,5.9-5.9,5.9 c-3.26,0-5.9-2.64-5.9-5.9C104.18,29.14,106.82,26.5,110.07,26.5L110.07,26.5L110.07,26.5z M66.64,33.37 c9.87,0,17.88,8.01,17.88,17.88c0,9.87-8.01,17.88-17.88,17.88c-9.87,0-17.88-8.01-17.88-17.88 C48.76,41.38,56.77,33.37,66.64,33.37L66.64,33.37z M66.64,21.73c16.31,0,29.53,13.22,29.53,29.53c0,16.3-13.22,29.53-29.53,29.53 c-16.3,0-29.53-13.23-29.53-29.53C37.12,34.95,50.34,21.73,66.64,21.73L66.64,21.73z"/></g></svg></a>
			<a href="/aux/yearOverview" aria-label="Year Overview"><svg id="yearOverviewIcon" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" height=32 width=32 viewBox="0 0 122.88 121"><defs><style>.cls-1{fill:#ef4136;}.cls-1,.cls-3,.cls-5{fill-rule:evenodd;}.cls-2{fill:gray;}.cls-3{fill:#e6e6e6;}.cls-4{fill:#1a1a1a;}.cls-5{fill:#c72b20;}</style></defs><title>Year Overview</title><path class="cls-1" d="M11.52,6.67h99.84a11.57,11.57,0,0,1,11.52,11.52V44.94H0V18.19A11.56,11.56,0,0,1,11.52,6.67Zm24.79,9.75A9.31,9.31,0,1,1,27,25.73a9.31,9.31,0,0,1,9.31-9.31Zm49.79,0a9.31,9.31,0,1,1-9.31,9.31,9.31,9.31,0,0,1,9.31-9.31Z"/><path class="cls-2" d="M111.36,121H11.52A11.57,11.57,0,0,1,0,109.48V40H122.88v69.46A11.56,11.56,0,0,1,111.36,121Z"/><path class="cls-3" d="M12.75,117.31h97.38a9.1,9.1,0,0,0,9.06-9.06V40H3.69v68.23a9.09,9.09,0,0,0,9.06,9.06Z"/><path class="cls-4" d="M39.54,100.77V66H32.29V58.42l8.6-3.69H51.47v46Zm19.46,0V91.31L73.2,76.8a28.28,28.28,0,0,0,2.27-2.52A11.27,11.27,0,0,0,76.91,72a5.21,5.21,0,0,0,.53-2.27A4.18,4.18,0,0,0,77,67.61a2.82,2.82,0,0,0-1.51-1.2A7.94,7.94,0,0,0,72.83,66H59.73V56.58q3-.69,6.73-1.26a56.19,56.19,0,0,1,8.64-.59,20.11,20.11,0,0,1,8.52,1.48A8.86,8.86,0,0,1,88,60.57a17,17,0,0,1,1.32,7.07,16.89,16.89,0,0,1-3.1,10.08A31.85,31.85,0,0,1,82.6,82l-7.87,8.06H90.59v10.69Z"/><path class="cls-5" d="M86.1,14.63a11.11,11.11,0,1,1-7.85,3.26l.11-.1a11.06,11.06,0,0,1,7.74-3.16Zm0,1.79a9.31,9.31,0,1,1-9.31,9.31,9.31,9.31,0,0,1,9.31-9.31Z"/><path class="cls-5" d="M36.31,14.63a11.11,11.11,0,1,1-7.85,3.26l.11-.1a11.08,11.08,0,0,1,7.74-3.16Zm0,1.79A9.31,9.31,0,1,1,27,25.73a9.31,9.31,0,0,1,9.31-9.31Z"/><path class="cls-4" d="M80.54,4.56C80.54,2,83,0,86.1,0s5.56,2,5.56,4.56V25.77c0,2.51-2.48,4.56-5.56,4.56s-5.56-2-5.56-4.56V4.56Z"/><path class="cls-4" d="M30.75,4.56C30.75,2,33.24,0,36.31,0s5.56,2,5.56,4.56V25.77c0,2.51-2.48,4.56-5.56,4.56s-5.56-2-5.56-4.56V4.56Z"/></svg></a>
			<a onclick="return darkLightToggle()" aria-label="Switch between light and dark mode"><svg version="1.1" id="darkLightIcon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="32" width="32" x="0px" y="0px" viewBox="0 0 122.8 122.8" style="enable-background:new 0 0 240 240" xml:space="preserve"><g><path d="M49.06,1.27c2.17-0.45,4.34-0.77,6.48-0.98c2.2-0.21,4.38-0.31,6.53-0.29c1.21,0.01,2.18,1,2.17,2.21 c-0.01,0.93-0.6,1.72-1.42,2.03c-9.15,3.6-16.47,10.31-20.96,18.62c-4.42,8.17-6.1,17.88-4.09,27.68l0.01,0.07 c2.29,11.06,8.83,20.15,17.58,25.91c8.74,5.76,19.67,8.18,30.73,5.92l0.07-0.01c7.96-1.65,14.89-5.49,20.3-10.78 c5.6-5.47,9.56-12.48,11.33-20.16c0.27-1.18,1.45-1.91,2.62-1.64c0.89,0.21,1.53,0.93,1.67,1.78c2.64,16.2-1.35,32.07-10.06,44.71 c-8.67,12.58-22.03,21.97-38.18,25.29c-16.62,3.42-33.05-0.22-46.18-8.86C14.52,104.1,4.69,90.45,1.27,73.83 C-2.07,57.6,1.32,41.55,9.53,28.58C17.78,15.57,30.88,5.64,46.91,1.75c0.31-0.08,0.67-0.16,1.06-0.25l0.01,0l0,0L49.06,1.27 L49.06,1.27z"/></g></svg></a>
			<a href="/aux/uses" aria-label="Uses"><svg class="svg-icon" width="34" height="34" style="vertical-align:middle; fill:DarkGreen; overflow:hidden" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M864 128l-704 0C140.8 128 128 140.8 128 160l0 512C128 691.2 140.8 704 160 704l236.8 0 0 128L256 832l0 64 512 0 0-64L627.2 832l0-128 236.8 0c19.2 0 32-12.8 32-32l0-512C896 140.8 883.2 128 864 128zM864 640c0 19.2-12.8 32-32 32L192 672c-19.2 0-32-12.8-32-32L160 192c0-19.2 12.8-32 32-32l640 0c19.2 0 32 12.8 32 32L864 640z"  /></svg></a>
			<a href="/aux/blogroll" aria-label="Blogroll"><svg version="1.1" id="Blogroll" xmlns="http://www.w3.org/2000/svg" x="0" y="0" width="32" height="32"
				viewBox="0 0 482.136 482.135" style="enable-background:new 0 0 482.136 482.135; fill:Navy"
				xml:space="preserve"><g><path d="M455.482,198.184L326.829,326.832c-35.535,35.54-93.108,35.54-128.646,0l-42.881-42.886l42.881-42.876l42.884,42.876
		c11.845,11.822,31.064,11.846,42.886,0l128.644-128.643c11.816-11.831,11.816-31.066,0-42.9l-42.881-42.881
		c-11.822-11.814-31.064-11.814-42.887,0l-45.928,45.936c-21.292-12.531-45.491-17.905-69.449-16.291l72.501-72.526
		c35.535-35.521,93.136-35.521,128.644,0l42.886,42.881C491.018,105.045,491.018,162.663,455.482,198.184z M201.206,366.698
		l-45.903,45.9c-11.845,11.846-31.064,11.817-42.881,0l-42.884-42.881c-11.845-11.821-11.845-31.041,0-42.886l128.646-128.648
		c11.819-11.814,31.069-11.814,42.884,0l42.886,42.886l42.876-42.886l-42.876-42.881c-35.54-35.521-93.113-35.521-128.65,0
		L26.655,283.946c-35.538,35.545-35.538,93.146,0,128.652l42.883,42.882c35.51,35.54,93.11,35.54,128.646,0l72.496-72.499
		C246.724,384.578,222.588,379.197,201.206,366.698z"/></g></svg></a>
			<a href="/sitemap.html" aria-label="Sitemap"><svg id="sitemapIcon" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" height=32 width=32 viewBox="0 0 113.84 122.88"><defs><style>.cls-2{fill-rule:evenodd;}</style></defs><title>Sitemap</title><path class="cls-2" d="M1.78,4,.18,7.55H44.23L42.61,4H23a1.17,1.17,0,0,1-1.18-1.17V0H5.05V2.81A1.17,1.17,0,0,1,3.87,4Zm67.7,95.21,2.88,22.22a1.49,1.49,0,0,0,1.36,1.47h35c.81,0,1.26-.78,1.36-1.5l3.73-22.19Zm1.78-5.77L69.66,97h44l-1.62-3.57H92.44a1.17,1.17,0,0,1-1.18-1.17V89.44H74.52v2.81a1.17,1.17,0,0,1-1.17,1.17ZM66.87,55.49l2.89,22.22a1.48,1.48,0,0,0,1.35,1.47h35c.81,0,1.26-.78,1.36-1.5l3.73-22.19Zm1.78-5.77-1.6,3.57H111.1l-1.62-3.57H89.83a1.17,1.17,0,0,1-1.17-1.18v-2.8H71.92v2.81a1.18,1.18,0,0,1-1.18,1.17ZM25.18,62.65H58.7v6H25.18v42H58.37v6H19.18V37.71h6V62.65ZM0,9.75,2.88,32a1.5,1.5,0,0,0,1.36,1.47h35c.81,0,1.26-.78,1.36-1.5L44.36,9.75Z"/></svg></a>
			<a href="/aux/categories" aria-label="Categories"><svg version="1.1" id="catIcon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height=32 width=32 x="0px" y="0px" viewBox="0 0 102.78 123.1" style="enable-background:new 0 0 102.78 123.1" xml:space="preserve"><style type="text/css">.st0{fill-rule:evenodd;clip-rule:evenodd;stroke:#000000;stroke-width:0.216;stroke-miterlimit:2.6131;}</style><g><path class="st0" d="M53.79,29.73c1.54,0,2.78,1.25,2.78,2.78s-1.25,2.78-2.78,2.78S51,34.05,51,32.52S52.25,29.73,53.79,29.73 L53.79,29.73z M58.1,118.65l0.06,0h0.31c0.48-0.01,0.57-0.06,0.94-0.3l0.36-0.23c4.77-3.01,7.04-7.46,7.57-12.92 c0.56-5.8-0.8-12.77-3.26-20.4l0,0c-0.01-0.03-0.02-0.06-0.03-0.09L57.9,62.32c-0.6,0.26-1.19,0.51-1.79,0.75 c-2.35,0.98-4.77,1.71-7.24,2.22c-2.66,0.57-5.33,0.88-8.01,0.93c-5.72,0.09-11.44-1.04-17.17-3.4l-3.65,14.36 c-0.7,2.74-1.28,5.17-1.76,7.36c-0.51,2.32-0.97,4.58-1.39,6.88c-0.21,1.13-0.33,1.75-0.45,2.38c-1.33,6.85-2.74,14.15,1.09,19.9 c1.09,1.64,2.5,2.85,4.2,3.66c1.74,0.82,3.8,1.25,6.16,1.31c0.05,0,0.09,0,0.14,0h2.79V95.37c0-1.18,0.96-2.14,2.14-2.14 c1.18,0,2.14,0.96,2.14,2.14v23.28h11.49V95.37c0-1.18,0.96-2.14,2.14-2.14c1.18,0,2.14,0.96,2.14,2.14v23.28H58.1L58.1,118.65z M14.21,1.45l8.09,7.7c6-2.42,12.05-3.72,18.15-3.78c6.12-0.05,12.26,1.16,18.43,3.77l9.05-8.46c0.86-0.8,2.2-0.76,3,0.1 c0.38,0.41,0.57,0.93,0.57,1.44h0l0.11,18.06c2.46,4.3,3.92,8.31,4.53,12.07l3.63-1.18c1.12-0.36,2.32,0.25,2.69,1.37 c0.36,1.12-0.25,2.32-1.37,2.69l-4.61,1.5c0,0.1,0,0.2-0.01,0.29c-0.08,3.19-0.8,6.16-2.04,8.95l2.92,0.39 c1.17,0.15,1.99,1.22,1.84,2.39c-0.15,1.17-1.22,1.99-2.39,1.84l-4.59-0.61c-0.29,0.44-0.6,0.87-0.92,1.3 c-2.73,3.67-5.99,6.62-9.57,8.89l6.42,23.33h0c2.62,8.14,4.06,15.66,3.44,22.1c-0.49,5.13-2.25,9.56-5.69,13.05h10.46h0.11v0.01 c6.98,0,12.4,0,17.7-5.14c3.08-2.98,4.37-6.8,4.26-10.6c-0.06-2.08-0.55-4.17-1.39-6.13c-0.85-1.97-2.05-3.79-3.54-5.33 c-2.92-3.01-6.97-4.97-11.68-4.83c-1.17,0.03-2.15-0.89-2.19-2.07c-0.03-1.17,0.89-2.15,2.07-2.19c6-0.18,11.15,2.29,14.85,6.11 c1.87,1.93,3.36,4.19,4.4,6.62c1.04,2.43,1.65,5.06,1.72,7.7c0.15,4.93-1.53,9.88-5.54,13.77c-6.55,6.34-12.71,6.34-20.67,6.34 v0.01h-0.11H58.56l-0.2,0h-9.12c-0.17,0.04-0.35,0.07-0.53,0.07c-0.18,0-0.36-0.02-0.53-0.07h-14.7c-0.17,0.04-0.35,0.07-0.53,0.07 c-0.18,0-0.36-0.02-0.53-0.07h-4.4c-0.08,0-0.15,0-0.23-0.01c-2.97-0.07-5.61-0.63-7.89-1.71c-2.41-1.14-4.4-2.85-5.94-5.16 c-4.79-7.2-3.21-15.37-1.72-23.05c0.19-0.96,0.37-1.91,0.45-2.34c0.42-2.3,0.89-4.61,1.43-7.03c0.56-2.54,1.15-5.01,1.78-7.49 l3.91-15.37c-4.32-2.53-7.98-5.91-10.53-10.02C9.14,50.51,9,50.28,8.87,50.06l-3.45,0.43c-1.17,0.14-2.23-0.69-2.38-1.86 c-0.14-1.17,0.69-2.23,1.86-2.38l2.05-0.25c-1.08-2.92-1.64-6.11-1.59-9.53l-3.78-1.23c-1.12-0.36-1.73-1.57-1.37-2.69 c0.36-1.12,1.57-1.73,2.69-1.37l2.85,0.93c0.6-3.71,1.9-7.65,4.02-11.8l0.84-17.41c0.06-1.17,1.05-2.08,2.23-2.03 C13.38,0.89,13.85,1.11,14.21,1.45L14.21,1.45L14.21,1.45z M20.37,13.2l-5.73-5.45l-0.64,13.21l0,0c-0.01,0.3-0.09,0.6-0.24,0.88 c-2.16,4.13-3.41,8.01-3.89,11.6l13.38,4.34c1.12,0.36,1.73,1.57,1.37,2.69c-0.36,1.12-1.57,1.73-2.69,1.37L9.66,37.85 c0.11,2.74,0.7,5.28,1.67,7.59l11.01-1.37c1.17-0.14,2.23,0.69,2.38,1.86c0.14,1.17-0.69,2.24-1.86,2.38l-9.3,1.16 c2.23,3.2,5.31,5.85,8.89,7.87c4.01,2.26,8.65,3.72,13.5,4.28c4.29,0.5,8.72,0.28,12.99-0.71c1.64-0.4,3.28-0.91,4.92-1.53 c5.15-2.03,9.86-5.33,13.55-10.06l-7.62-1.02c-1.17-0.15-1.99-1.22-1.84-2.39c0.15-1.17,1.22-1.99,2.39-1.84l9.64,1.29 c1.18-2.28,1.93-4.68,2.16-7.24l-11.42,3.7c-1.12,0.36-2.32-0.25-2.69-1.37c-0.36-1.12,0.25-2.32,1.37-2.69l12.63-4.1 c-0.47-3.57-1.88-7.47-4.38-11.75h0c-0.18-0.31-0.29-0.68-0.29-1.07L67.28,7.11l-6.43,6.02c-0.61,0.64-1.58,0.85-2.43,0.47 c-6.02-2.74-12-4.01-17.94-3.96c-5.94,0.05-11.87,1.43-17.8,3.98l0,0C21.92,13.94,21.01,13.8,20.37,13.2L20.37,13.2z M37.54,39.46 c-1.18,0-2.14-0.96-2.14-2.14s0.96-2.14,2.14-2.14h6.61c1.18,0,2.14,0.96,2.14,2.14s-0.96,2.14-2.14,2.14h-1.2 c0.08,1.25,0.3,2.35,0.63,3.28c0.49,1.4,1.23,2.42,2.12,3.07c0.87,0.64,1.91,0.97,3.03,0.99c0.86,0.02,1.77-0.14,2.71-0.47 c1.11-0.39,2.33,0.19,2.72,1.3c0.39,1.11-0.19,2.33-1.3,2.72c-1.41,0.5-2.83,0.74-4.22,0.71c-2-0.04-3.87-0.63-5.46-1.81 c-0.79-0.59-1.51-1.31-2.13-2.17c-0.55,0.89-1.2,1.59-1.95,2.15c-2.49,1.85-5.65,1.86-9.07,1.38c-1.17-0.16-1.98-1.24-1.82-2.4 c0.16-1.17,1.24-1.98,2.4-1.82c2.44,0.34,4.61,0.41,5.93-0.58c1.2-0.9,1.98-2.8,2.09-6.35H37.54L37.54,39.46z M28.12,29.73 c1.54,0,2.78,1.25,2.78,2.78s-1.25,2.78-2.78,2.78c-1.54,0-2.78-1.25-2.78-2.78S26.58,29.73,28.12,29.73L28.12,29.73z"/></g></svg></a>
			<a href="/aux/privacy-policy" aria-label="Privacy Policy"><svg xmlns="http://www.w3.org/2000/svg" height=32 width=32 shape-rendering="geometricPrecision" text-rendering="geometricPrecision" image-rendering="optimizeQuality" fill-rule="evenodd" clip-rule="evenodd" viewBox="0 0 511 512.35"><path d="M162.62 21.9c-5.49 5.43-10.63 12.02-15.42 19.71-17.37 27.82-30.33 69.99-39.92 123.16-56.3 10.64-91.06 34.14-89.9 58.14 1.04 21.74 28.46 38.41 69.67 49.92-2.71 8.38-2.07 9.82 1.6 20.13-30.78 12.98-62.94 52.4-88.65 86.93l100.03 67.61-35.32 64.85h384.41l-37.26-64.85L511 378.63c-29.08-40.85-64.19-75.56-86.12-84.98 4.63-12.02 5.44-14.12 1.56-20.79 41.21-11.72 68.23-28.84 68.17-51.47-.06-24.68-35.5-48.38-88.31-56.62-12.64-53.5-25.22-95.62-41.23-123.27-2.91-5.02-5.93-9.57-9.09-13.62-47.66-61.12-64.36-2.69-98.14-2.76-39.17-.08-44.15-53.69-95.22-3.22zm67.12 398.37c-3.57 0-6.47-2.9-6.47-6.47s2.9-6.47 6.47-6.47h10.52c1.38 0 2.66.44 3.7 1.17 3.77 2.1 7.46 3.33 11.01 3.42 3.54.09 7.14-.96 10.8-3.45a6.515 6.515 0 0 1 3.61-1.11l12.78-.03c3.57 0 6.46 2.9 6.46 6.47s-2.89 6.47-6.46 6.47h-10.95c-5.46 3.27-10.98 4.67-16.54 4.53-5.44-.14-10.78-1.77-16.01-4.53h-8.92zm-69.12-140.78c60.43 21.74 120.87 21.38 181.3 1.83-58.45 4.75-122.79 3.62-181.3-1.83zm208.37-.86c20.89 70.63-68.53 106.5-101.95 27.98h-22.11c-34.12 78.28-122.14 44.17-102.16-28.94-7.31-.8-14.51-1.68-21.56-2.62l-.32 1.88-.59 3.56-3.48 20.87c-30.39-6.72-13.36 71.77 14.26 64.87 4.22 12.18 7.69 22.62 11.26 32.19 36.81 98.83 190.88 104.81 226.95 6.36 3.78-10.32 6.85-21.64 11.24-35.39 25.44 4.06 46.35-73.31 15.34-67.63l-3.19-21.05-.55-3.65-.23-1.54c-7.47 1.16-15.12 2.2-22.91 3.11zM123.7 176.34l7.43-25.43c48.16 40.42 214.59 34.09 250.87 0l6.26 25.43c-42.31 44.75-219.33 38.67-264.56 0z"/></svg></a>
			<a href="/feed.xml" aria-label="RSS Feed"><svg xmlns="http://www.w3.org/2000/svg" height="32" viewBox="0 -960 960 960" width="32" style="background-color:orange; fill:white"><path d="M200-120q-33 0-56.5-23.5T120-200q0-33 23.5-56.5T200-280q33 0 56.5 23.5T280-200q0 33-23.5 56.5T200-120Zm480 0q0-117-44-218.5T516-516q-76-76-177.5-120T120-680v-120q142 0 265 53t216 146q93 93 146 216t53 265H680Zm-240 0q0-67-25-124.5T346-346q-44-44-101.5-69T120-440v-120q92 0 171.5 34.5T431-431q60 60 94.5 139.5T560-120H440Z"/></svg></a>
		</div>
		</nav>
	</header>

	<main>
<div id="search"></div>



	<article>
	<p class=dimmedColor><time datetime="2021-12-13 20:00:00">13th December 2021</time>, 9 min read</p>
<h1>Filtering Bots and Crawlers from Access.log</h1>
<p>Original post is here <a href="https://eklausmeier.goip.de/blog/2021/12-13-filtering-bots-and-crawlers-from-access-log">eklausmeier.goip.de/blog/2021/12-13-filtering-bots-and-crawlers-from-access-log</a>.</p>
<br>
<p><strong>1. Problem statement.</strong> When you run a web-server on your machine many <a href="https://en.wikipedia.org/wiki/Internet_bot">bots</a> and <a href="https://en.wikipedia.org/wiki/Web_crawler">crawlers</a> will visit. When analysing how many &quot;real&quot; visitors you have, you should therefore suppress these entries in your analysis from your log file of the web-server.</p>
<p>This blog is served by <a href="https://hiawatha.leisink.net">Hiawatha</a> web-server. Every visitor writes at least one entry into the web-server's log file. Hiawatha and many other web-servers call it access.log. Hiawatha has other log files, e.g., error.log, garbage.log, and system.log. An entry in access.log looks something like this:</p>
<pre class="line-numbers"><code class="language-log">192.168.178.24|Mon 13 Dec 2021 11:37:03 +0100|200|6148|GET /blog/2014/09-20-advances-in-automotive-technology/ HTTP/1.1||Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/95.0.4638.69 Safari/537.36|Host: nucsaaze|Connection: keep-alive|Cache-Control: max-age=0|Upgrade-Insecure-Requests: 1|Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9|Sec-GPC: 1|Accept-Encoding: gzip, deflate|Accept-Language: en-US,en;q=0.9
192.168.178.24|Mon 13 Dec 2021 11:37:04 +0100|200|168499|GET /img/RynoSingleWheel.jpg HTTP/1.1|http://nucsaaze/blog/2014/09-20-advances-in-automotive-technology/|Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/95.0.4638.69 Safari/537.36|Host: nucsaaze|Connection: keep-alive|Accept: image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8|Sec-GPC: 1|Accept-Encoding: gzip, deflate|Accept-Language: en-US,en;q=0.9
192.168.178.24|Mon 13 Dec 2021 11:37:04 +0100|304|182|GET /img/LitMotorBike.jpg HTTP/1.1|http://nucsaaze/blog/2014/09-20-advances-in-automotive-technology/|Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/95.0.4638.69 Safari/537.36|Host: nucsaaze|Connection: keep-alive|Accept: image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8|Sec-GPC: 1|Accept-Encoding: gzip, deflate|Accept-Language: en-US,en;q=0.9|If-Modified-Since: Mon, 13 Dec 2021 10:14:34 GMT
171.25.193.77|Mon 13 Dec 2021 12:58:31 +0100|200|6419|GET / HTTP/1.1||Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/95.0.4638.69 Safari/537.36|Host: 94.114.1.108:8443|Connection: close|Accept: */*|Accept-Encoding: gzip
185.220.100.242|Mon 13 Dec 2021 12:58:36 +0100|200|2456|GET /favicon.ico HTTP/1.1||Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/95.0.4638.69 Safari/537.36|Host: 94.114.1.108:8443|Connection: close|Accept: */*|Accept-Encoding: gzip
</code></pre>
<p>Hiawatha's access.log has the following fields, separated by <code>|</code>:</p>
<ol>
<li>host</li>
<li>date</li>
<li>code</li>
<li>size</li>
<li>URL</li>
<li>referer</li>
<li>user agent</li>
<li>and other fields</li>
</ol>
<p><strong>2. Examples.</strong> Here is the <a href="https://developers.google.com/search/docs/advanced/crawling/googlebot">Google-Bot</a>, seen in access.log, which is a highly welcomed crawler:</p>
<pre class="line-numbers"><code class="language-log">66.249.76.169|Fri 10 Dec 2021 12:32:14 +0100|200|7037|GET /blog/2021/07-13-performance-comparison-c-vs-java-vs-javascript-vs-luajit-vs-pypy-vs-php-vs-python-vs-perl/ HTTP/1.1||Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)|Host: eklausmeier.goip.de|Connection: keep-alive|Accept: text/html,application/xhtml+xml,application/signed-exchange;v=b3,application/xml;q=0.9,*/*;q=0.8|From: googlebot(at)googlebot.com|Accept-Encoding: gzip, deflate, br|If-Modified-Since: Fri, 19 Nov 2021 04:23:35 GMT
</code></pre>
<p>Here are two entries of the <a href="http://yandex.com/bots">Yandex-Bot</a>, also highly welcomed:</p>
<pre class="line-numbers"><code class="language-log">5.255.253.106|Wed 08 Dec 2021 12:06:43 +0100|200|2761|GET /blog/2014/01-19-cisco-2014-annual-security-report-java-continues-to-be-most-vulnerable-of-all-web-exploits HTTP/1.1||Mozilla/5.0 (compatible; YandexBot/3.0; +http://yandex.com/bots)|Host: eklausmeier.goip.de|Connection: keep-alive|From: support@search.yandex.ru|Accept-Encoding: gzip,deflate|Accept: */*
213.180.203.141|Wed 08 Dec 2021 12:06:44 +0100|200|2434|GET /blog/2013/12-08-surfing-the-internet-with-100-mbits HTTP/1.1||Mozilla/5.0 (compatible; YandexBot/3.0; +http://yandex.com/bots)|Host: eklausmeier.goip.de|Connection: keep-alive|From: support@search.yandex.ru|Accept-Encoding: gzip,deflate|Accept: */*
</code></pre>
<p>Here is an example of a bot, whose purpose is doubtful and probably just nonsense:</p>
<pre class="line-numbers"><code class="language-log">45.155.205.233|Wed 08 Dec 2021 19:45:48 +0100|303|228|GET /index.php?s=/Index/\think\app/invokefunction&amp;function=call_user_func_array&amp;vars[0]=md5&amp;vars[1][]=HelloThinkPHP21 HTTP/1.1||Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/78.0.3904.108 Safari/537.36|Host: 94.114.1.108:443|Accept-Encoding: gzip|Connection: close
</code></pre>
<p>Some of the bots and crawlers identify themselves in the user-agent field, e.g., Google and Yandex. But unfortunately, many do not. Quite the contrary, they try to hide as normal browsers.</p>
<p>Below Perl script <code>accesslogFilter</code> filters access.log so that only the &quot;real&quot; visitors remain. The script filters according:</p>
<ol>
<li>IP addresses: some bots and crawlers do not identify themselves, so we have to resort to naked addresses</li>
<li>HTTP status codes</li>
<li>identifying string in the user-agent field</li>
</ol>
<p><strong>3. Configuration.</strong> Here is the list of IP addresses I found to be &quot;annoying&quot; in any analysis:</p>
<pre class="line-numbers"><code class="language-Perl">my %ips = (
    '18.212.118.57' =&gt; 0, '18.232.89.176' =&gt; 0, '3.94.81.106' =&gt; 0,
    '34.239.184.105' =&gt; 0, '54.80.126.99' =&gt; 0, '54.162.60.209' =&gt; 0,       # compute-1.amazonaws.com
    '62.138.2.14' =&gt; 0, '62.138.2.214' =&gt; 0, '62.138.2.160' =&gt; 0,
    '62.138.3.52' =&gt; 0, '62.138.6.15' =&gt; 0, '85.25.210.23' =&gt; 0,    # startdedicated.de
    '66.240.192.138' =&gt; 0, '66.240.219.133' =&gt; 0, '66.240.219.146' =&gt; 0, '66.240.236.119' =&gt; 0,
    '71.6.135.131' =&gt; 0, '71.6.146.185' =&gt; 0, '71.6.158.166' =&gt; 0, '71.6.165.200' =&gt; 0,
    '71.6.167.142' =&gt; 0, '71.6.199.23' =&gt; 0, '80.82.77.33' =&gt; 0, '80.82.77.139' =&gt; 0,
    '82.221.105.6' =&gt; 0, '82.221.105.7' =&gt; 0,       # shodan.io
    '138.246.253.24' =&gt; 0, '106.55.250.60' =&gt; 0,    # various robots.txt reader
    '127.0.0.1' =&gt; 0,       # localhost
    '192.168.178.2' =&gt; 0, '192.168.178.20' =&gt; 0, '192.168.178.24' =&gt; 0,
    '192.168.178.118' =&gt; 0, '192.168.178.249' =&gt; 0  # local network
);
</code></pre>
<p>For example, <a href="https://www.shodan.io/">shodan.io</a> does not identify itself in the user-agent string. Therefore I simply identified them by using <code>nslookup</code>:</p>
<pre class="line-numbers"><code class="language-bash">$ nslookup 82.221.105.7
7.105.221.82.in-addr.arpa       name = census11.shodan.io.
</code></pre>
<p>Here is the list of HTTP status codes, which are filtered out:</p>
<pre class="line-numbers"><code class="language-Perl">my %errorCode = ( 301 =&gt; 0, 302 =&gt; 0, 400 =&gt; 0, 403 =&gt; 0, 404 =&gt; 0, 405 =&gt; 0, 500 =&gt; 0, 501 =&gt; 0, 503 =&gt; 0, 505 =&gt; 0 );
</code></pre>
<p>Status code 404 would also be very useful to find links on my web-server which point to nowhere. But the bots are so numerous that it seems to be more beneficial to just filter it out.</p>
<p>Here is the list of user-agent strings, which identify a bot or crawler:</p>
<pre class="line-numbers"><code class="language-Perl">my %bots = (
    adsbot =&gt; 0, adscanner =&gt; 0, ahrefsbot =&gt; 0, applebot =&gt; 0, 'archive.org_bot' =&gt; 0,
    baiduspider =&gt; 0, bingbot =&gt; 0, blexbot =&gt; 0,
    ccbot =&gt; 0, censysinspect =&gt; 0,
    'clark-crawler2' =&gt; 0, crawler =&gt; 0, crawler2 =&gt; 0, 'crawler.php' =&gt; 0,
    criteobot =&gt; 0, curl =&gt; 0,
    dataforseobot =&gt; 0, dotbot =&gt; 0, 'feedsearch-crawler' =&gt; 0,
    facebookexternalhit =&gt; 0, fluid =&gt; 0, 'go-http-client' =&gt; 0,
    googlebot =&gt; 0, ioncrawl =&gt; 0, lighthouse =&gt; 0, ltx71 =&gt; 0,
    mediapartners =&gt; 0, 'mediapartners-google' =&gt; 0,
    netestate =&gt; 0, nuclei =&gt; 0, nicecrawler =&gt; 0, petalbot =&gt; 0,
    proximic =&gt; 0, 'pulsepoint-ads.txt-crawler' =&gt; 0, 'python-requests' =&gt; 0,
    semrushbot =&gt; 0, 'semrushbot-ba' =&gt; 0, sitecheckerbotcrawler =&gt; 0, sitelockspider =&gt; 0,
    twitterbot =&gt; 0, ucrawl =&gt; 0,
    virustotal =&gt; 0, 'web-crawler' =&gt; 0, 'webmeup-crawler' =&gt; 0,
    'x-fb-crawlerbot' =&gt; 0, yandexbot =&gt; 0,
);
</code></pre>
<p><strong>4. Perl script.</strong> With those configurations in place, the rest of the Perl script <code>accesslogFilter</code> is pretty straightforward:</p>
<pre class="line-numbers"><code class="language-Perl">use strict;

use Getopt::Std;
my %opts = ();
getopts('o:',\%opts);
my $statout = (defined($opts{'o'}) ? $opts{'o'} : undef);
my ($emptyUA,$badURL,$smallUA) = (0,0,0);
</code></pre>
<p>Put the above config, i.e., the hash tables after these declarations. Now the actual filtering-code:</p>
<pre class="line-numbers"><code class="language-Perl">W: while (&lt;&gt;) {
        my @F = split /\|/;
        if (defined($ips{$F[0]})) { $ips{$F[0]} += 1; next; }
        if ($#F &lt;= 5) { $emptyUA += 1; next; }
        if (defined($errorCode{$F[2]})) { $errorCode{$F[2]} += 1; next; }       # not found errors are ignored
        if ($F[4] =~ /XDEBUG_SESSION_START|HelloThink(CMF|PHP)/) { $badURL += 1; next; }
        if ($#F &gt;= 6) { # Is UA field available?
                if (length($F[6]) &lt;= 3) { $smallUA += 1; next W; }
                for ( split(/[ :;,\/\(\)\@]/,lc $F[6]) ) {
                        if (defined($bots{$_})) { $bots{$_} += 1; next W; }     # skip bots
                }
        }
        print;
}
</code></pre>
<p>For reporting purposes only, i.e., when given command line option <code>-o report.txt</code>, not required for filtering:</p>
<pre class="line-numbers"><code class="language-Perl">if (defined($statout)) {
        open(F,&quot;&gt;$statout&quot;) || die(&quot;Cannot write to $statout&quot;);
        for (sort keys %ips) {
                next if ($ips{$_} == 0);
                printf(F &quot;IP\t%d\t%s\n&quot;,$ips{$_},$_);
        }
        printf(F &quot;eUA\t%d\n&quot;,$emptyUA);
        printf(F &quot;badURL\t%d\n&quot;,$badURL);
        for (sort keys %errorCode) {
                next if ($errorCode{$_} == 0);
                printf(F &quot;code\t%d\t%d\n&quot;,$errorCode{$_},$_);
        }
        printf(F &quot;sUA\t%d\n&quot;,$smallUA);
        for (sort keys %bots) {
                next if ($bots{$_} == 0);
                printf(F &quot;bot\t%d\t%s\n&quot;,$bots{$_},$_);
        }
}
</code></pre>
<p>The script is in <a href="https://github.com">GitHub</a>: <a href="https://github.com/eklausme/bin/blob/master/accesslogFilter">eklausme/bin/accesslogFilter</a>.</p>
<p><strong>5. Reporting.</strong> Now to get a feeling how much filtering actually happens when applying above rules:</p>
<ol>
<li>Unmodified access.log for ca. one year: 181,282 entries</li>
<li>Filtered access.log with <code>accesslogFilter</code>: 32,451 entries remain, i.e., less than 20%</li>
</ol>
<p>So 80% of the visits of my web-server is stemming from bots, crawlers, junk, or from myself.</p>
<p>Unfiltered output of goaccess looks like this:
<img src="/img/accesslogAll.png" alt=""></p>
<p>Filtered output of goaccess looks like this:
<img src="/img/accesslogAllFilter.png" alt=""></p>
<p>I have written about goacess here: <a href="/blog/2021/05-22-using-goaccess-with-hiawatha-web-server">Using GoAccess with Hiawatha Web-Server</a>. Unfortunately goaccess is not good at filtering.</p>
<p>The statistics of <code>accesslogFilter</code> are below. First statistics for filtering according IP address. Host &quot;startdedicated&quot; is at the top:</p>
<pre class="line-numbers"><code class="language-log">IP	704	106.55.250.60
IP	154	127.0.0.1
IP	419	138.246.253.24
IP	335	18.212.118.57
IP	333	18.232.89.176
IP	1753	192.168.178.118
IP	1341	192.168.178.2
IP	1554	192.168.178.20
IP	6180	192.168.178.24
IP	496	192.168.178.249
IP	331	3.94.81.106
IP	335	34.239.184.105
IP	335	54.162.60.209
IP	329	54.80.126.99
IP	282	62.138.2.14
IP	6757	62.138.2.160
IP	286	62.138.2.214
IP	1353	62.138.3.52
IP	631	62.138.6.15
IP	11	66.240.192.138
IP	14	66.240.219.133
IP	6	66.240.219.146
IP	17	66.240.236.119
IP	32	71.6.135.131
IP	10	71.6.146.185
IP	14	71.6.158.166
IP	5	71.6.165.200
IP	10	71.6.167.142
IP	17	71.6.199.23
IP	32	80.82.77.139
IP	44	80.82.77.33
IP	52	82.221.105.6
IP	41	82.221.105.7
IP	15688	85.25.210.23
</code></pre>
<p>Above numbers are depicted in below pie-chart:</p>
<div class="chartarea" id="container1"></div>
<p>Special filtering according user-agent or bad/silly URL:</p>
<pre class="line-numbers"><code class="language-log">eUA	143
badURL	1835
sUA	3580
</code></pre>
<p>Distribution of filtered HTTP status code. As mentioned above, code 404 dominates by far:</p>
<pre class="line-numbers"><code class="language-txt">code	16033	301
code	15	302
code	16	400
code	67	403
code	48222	404
code	3877	405
code	91	500
code	126	501
code	981	503
</code></pre>
<p>Above numbers as pie-chart:</p>
<div class="chartarea" id="container2"></div>
<p>Statistics on filtered entries according user-agent strings. Google is at the top, followed by <a href="https://www.semrush.com">Semrush</a>:</p>
<pre class="line-numbers"><code class="language-txt">bot	326	adsbot
bot	932	adscanner
bot	5163	ahrefsbot
bot	325	applebot
bot	18	archive.org_bot
bot	426	baiduspider
bot	1011	bingbot
bot	1105	blexbot
bot	2	ccbot
bot	1131	censysinspect
bot	182	clark-crawler2
bot	39	crawler
bot	88	crawler.php
bot	4	criteobot
bot	196	curl
bot	379	dataforseobot
bot	1688	dotbot
bot	8	facebookexternalhit
bot	1	feedsearch-crawler
bot	16	fluid
bot	226	go-http-client
bot	7016	googlebot
bot	34	ioncrawl
bot	19	ltx71
bot	2059	mediapartners-google
bot	410	netestate
bot	1	nicecrawler
bot	346	nuclei
bot	1088	petalbot
bot	77	proximic
bot	4	pulsepoint-ads.txt-crawler
bot	342	python-requests
bot	6609	semrushbot
bot	159	semrushbot-ba
bot	26	sitecheckerbotcrawler
bot	699	sitelockspider
bot	68	twitterbot
bot	2	ucrawl
bot	4	virustotal
bot	1715	yandexbot
</code></pre>
<p>Above data as pie-chart.</p>
<div class="chartarea" id="container3"></div>
<p>This gives a good graphical presentation why Bing, or Baidu are way inferior to Google search.</p>
<p><strong>6. References.</strong> Below links might provide further information on bots &amp; crawlers.</p>
<ol>
<li><a href="http://www.blogtips.org/web-crawlers-love-the-good-but-kill-the-bad-and-the-ugly">Web Crawlers: Love the Good, but Kill the Bad and the Ugly</a>: This post talks about limiting the bots &amp; crawlers to your website as they are slowing down the entire server. The author mentions facebookexternalhit visiting his site 541 times per hour!</li>
<li><a href="https://www.iab.com/guidelines/iab-abc-international-spiders-bots-list">IAB/ABC International Spiders and Bots List</a>: A commercial list with bots, spiders, and crawlers. The list costs 15,000 USD.</li>
<li><a href="https://www.pedromonjo.com/2020/01/bots-and-the-adobe-experience-cloud.html">Bots and the Adobe Experience Cloud</a>: AEC uses IAB.</li>
<li>List of bots in <a href="https://wordpress.org/plugins/stopbadbots">StopBadBots</a>: <a href="https://github.com/sminozzi/stopbadbots/blob/master/functions/aBots.php">aBots.php</a></li>
<li><a href="https://www.awstats.org">AWStats</a> robot list: <a href="https://github.com/eldy/AWStats/blob/develop/wwwroot/cgi-bin/lib/robots.pm">robots.pm</a>.</li>
</ol>
<p>Added 14-Mar-2022: I added further IP addresses, HTTP status codes, and bot names to script <a href="https://github.com/eklausme/bin/blob/master/accesslogFilter"><code>accesslogFilter</code></a>. Then I compared the ratio of original log file to filtered log file. Below table shows the results. One can see that bots, crawlers, junk and myself make up to almost 90% of the traffic. Below table is chronologically in reverse order, i.e., lowest number is youngest.</p>
<table>
<thead>
<tr>
<th align="right">Log file</th>
<th align="right">#entries</th>
<th align="right">after filtering</th>
<th>ratio</th>
</tr>
</thead>
<tbody>
<tr>
<td align="right">0</td>
<td align="right">1813</td>
<td align="right">375</td>
<td>0.207</td>
</tr>
<tr>
<td align="right">1</td>
<td align="right">10913</td>
<td align="right">1605</td>
<td>0.147</td>
</tr>
<tr>
<td align="right">2</td>
<td align="right">8631</td>
<td align="right">1411</td>
<td>0.163</td>
</tr>
<tr>
<td align="right">3</td>
<td align="right">8146</td>
<td align="right">1287</td>
<td>0.158</td>
</tr>
<tr>
<td align="right">4</td>
<td align="right">10319</td>
<td align="right">1380</td>
<td>0.134</td>
</tr>
<tr>
<td align="right">5</td>
<td align="right">6287</td>
<td align="right">1276</td>
<td>0.203</td>
</tr>
<tr>
<td align="right">6</td>
<td align="right">8064</td>
<td align="right">1239</td>
<td>0.154</td>
</tr>
<tr>
<td align="right">7</td>
<td align="right">9684</td>
<td align="right">1023</td>
<td>0.106</td>
</tr>
<tr>
<td align="right">8</td>
<td align="right">6317</td>
<td align="right">1110</td>
<td>0.176</td>
</tr>
<tr>
<td align="right">9</td>
<td align="right">8115</td>
<td align="right">1096</td>
<td>0.135</td>
</tr>
<tr>
<td align="right">10</td>
<td align="right">7334</td>
<td align="right">1302</td>
<td>0.178</td>
</tr>
<tr>
<td align="right">11</td>
<td align="right">6835</td>
<td align="right">1262</td>
<td>0.185</td>
</tr>
<tr>
<td align="right">12</td>
<td align="right">7239</td>
<td align="right">922</td>
<td>0.127</td>
</tr>
<tr>
<td align="right">13</td>
<td align="right">10457</td>
<td align="right">1297</td>
<td>0.124</td>
</tr>
<tr>
<td align="right">14</td>
<td align="right">8897</td>
<td align="right">1102</td>
<td>0.124</td>
</tr>
<tr>
<td align="right">15</td>
<td align="right">9554</td>
<td align="right">1051</td>
<td>0.110</td>
</tr>
<tr>
<td align="right">16</td>
<td align="right">8945</td>
<td align="right">1020</td>
<td>0.114</td>
</tr>
<tr>
<td align="right">17</td>
<td align="right">4873</td>
<td align="right">891</td>
<td>0.183</td>
</tr>
<tr>
<td align="right">18</td>
<td align="right">4961</td>
<td align="right">753</td>
<td>0.152</td>
</tr>
<tr>
<td align="right">19</td>
<td align="right">5865</td>
<td align="right">611</td>
<td>0.104</td>
</tr>
<tr>
<td align="right">20</td>
<td align="right">4850</td>
<td align="right">501</td>
<td>0.103</td>
</tr>
<tr>
<td align="right">21</td>
<td align="right">4290</td>
<td align="right">492</td>
<td>0.115</td>
</tr>
<tr>
<td align="right">22</td>
<td align="right">4863</td>
<td align="right">514</td>
<td>0.106</td>
</tr>
<tr>
<td align="right">23</td>
<td align="right">4652</td>
<td align="right">485</td>
<td>0.104</td>
</tr>
<tr>
<td align="right">24</td>
<td align="right">4289</td>
<td align="right">520</td>
<td>0.121</td>
</tr>
<tr>
<td align="right">25</td>
<td align="right">3940</td>
<td align="right">706</td>
<td>0.179</td>
</tr>
<tr>
<td align="right">26</td>
<td align="right">4292</td>
<td align="right">634</td>
<td>0.148</td>
</tr>
<tr>
<td align="right">27</td>
<td align="right">3044</td>
<td align="right">608</td>
<td>0.200</td>
</tr>
<tr>
<td align="right">28</td>
<td align="right">4390</td>
<td align="right">538</td>
<td>0.123</td>
</tr>
<tr>
<td align="right">29</td>
<td align="right">3149</td>
<td align="right">410</td>
<td>0.130</td>
</tr>
<tr>
<td align="right">30</td>
<td align="right">4402</td>
<td align="right">470</td>
<td>0.107</td>
</tr>
<tr>
<td align="right">31</td>
<td align="right">3894</td>
<td align="right">456</td>
<td>0.117</td>
</tr>
<tr>
<td align="right">32</td>
<td align="right">3018</td>
<td align="right">518</td>
<td>0.172</td>
</tr>
<tr>
<td align="right">33</td>
<td align="right">5170</td>
<td align="right">646</td>
<td>0.125</td>
</tr>
<tr>
<td align="right">34</td>
<td align="right">3980</td>
<td align="right">581</td>
<td>0.146</td>
</tr>
<tr>
<td align="right">35</td>
<td align="right">3325</td>
<td align="right">457</td>
<td>0.137</td>
</tr>
<tr>
<td align="right">36</td>
<td align="right">2979</td>
<td align="right">478</td>
<td>0.160</td>
</tr>
<tr>
<td align="right">37</td>
<td align="right">5648</td>
<td align="right">596</td>
<td>0.106</td>
</tr>
<tr>
<td align="right">38</td>
<td align="right">3139</td>
<td align="right">470</td>
<td>0.150</td>
</tr>
<tr>
<td align="right">39</td>
<td align="right">2859</td>
<td align="right">360</td>
<td>0.126</td>
</tr>
<tr>
<td align="right">40</td>
<td align="right">3157</td>
<td align="right">700</td>
<td>0.222</td>
</tr>
<tr>
<td align="right">41</td>
<td align="right">2370</td>
<td align="right">280</td>
<td>0.118</td>
</tr>
<tr>
<td align="right">42</td>
<td align="right">3457</td>
<td align="right">286</td>
<td>0.083</td>
</tr>
<tr>
<td align="right">43</td>
<td align="right">8597</td>
<td align="right">403</td>
<td>0.047</td>
</tr>
<tr>
<td align="right">44</td>
<td align="right">2414</td>
<td align="right">258</td>
<td>0.107</td>
</tr>
<tr>
<td align="right">45</td>
<td align="right">2913</td>
<td align="right">318</td>
<td>0.109</td>
</tr>
<tr>
<td align="right">46</td>
<td align="right">1835</td>
<td align="right">308</td>
<td>0.168</td>
</tr>
<tr>
<td align="right">47</td>
<td align="right">2027</td>
<td align="right">420</td>
<td>0.207</td>
</tr>
<tr>
<td align="right">48</td>
<td align="right">1777</td>
<td align="right">319</td>
<td>0.180</td>
</tr>
<tr>
<td align="right">49</td>
<td align="right">1369</td>
<td align="right">443</td>
<td>0.324</td>
</tr>
<tr>
<td align="right">50</td>
<td align="right">2860</td>
<td align="right">415</td>
<td>0.145</td>
</tr>
<tr>
<td align="right">51</td>
<td align="right">2965</td>
<td align="right">292</td>
<td>0.098</td>
</tr>
<tr>
<td align="right">52</td>
<td align="right">1325</td>
<td align="right">264</td>
<td>0.199</td>
</tr>
</tbody>
</table>
<p>Added 29-Mar-2022: Added even more IP addresses and bot names to <code>accesslogFilter</code>. Table is now chronologically in order, i.e., lower number is older.</p>
<table>
<thead>
<tr>
<th align="right">Log file</th>
<th align="right">#entries</th>
<th align="right">after filtering</th>
<th>ratio</th>
</tr>
</thead>
<tbody>
<tr>
<td align="right">1</td>
<td align="right">1325</td>
<td align="right">254</td>
<td>0.192</td>
</tr>
<tr>
<td align="right">2</td>
<td align="right">2965</td>
<td align="right">286</td>
<td>0.096</td>
</tr>
<tr>
<td align="right">3</td>
<td align="right">2860</td>
<td align="right">402</td>
<td>0.141</td>
</tr>
<tr>
<td align="right">4</td>
<td align="right">1369</td>
<td align="right">416</td>
<td>0.304</td>
</tr>
<tr>
<td align="right">5</td>
<td align="right">1777</td>
<td align="right">303</td>
<td>0.171</td>
</tr>
<tr>
<td align="right">6</td>
<td align="right">2027</td>
<td align="right">404</td>
<td>0.199</td>
</tr>
<tr>
<td align="right">7</td>
<td align="right">1835</td>
<td align="right">298</td>
<td>0.162</td>
</tr>
<tr>
<td align="right">8</td>
<td align="right">2913</td>
<td align="right">297</td>
<td>0.102</td>
</tr>
<tr>
<td align="right">9</td>
<td align="right">2414</td>
<td align="right">253</td>
<td>0.105</td>
</tr>
<tr>
<td align="right">10</td>
<td align="right">8597</td>
<td align="right">400</td>
<td>0.047</td>
</tr>
<tr>
<td align="right">11</td>
<td align="right">3457</td>
<td align="right">284</td>
<td>0.082</td>
</tr>
<tr>
<td align="right">12</td>
<td align="right">2370</td>
<td align="right">277</td>
<td>0.117</td>
</tr>
<tr>
<td align="right">13</td>
<td align="right">3157</td>
<td align="right">699</td>
<td>0.221</td>
</tr>
<tr>
<td align="right">14</td>
<td align="right">2859</td>
<td align="right">358</td>
<td>0.125</td>
</tr>
<tr>
<td align="right">15</td>
<td align="right">3139</td>
<td align="right">451</td>
<td>0.144</td>
</tr>
<tr>
<td align="right">16</td>
<td align="right">5648</td>
<td align="right">556</td>
<td>0.098</td>
</tr>
<tr>
<td align="right">17</td>
<td align="right">2979</td>
<td align="right">456</td>
<td>0.153</td>
</tr>
<tr>
<td align="right">18</td>
<td align="right">3325</td>
<td align="right">442</td>
<td>0.133</td>
</tr>
<tr>
<td align="right">19</td>
<td align="right">3980</td>
<td align="right">559</td>
<td>0.140</td>
</tr>
<tr>
<td align="right">20</td>
<td align="right">5170</td>
<td align="right">626</td>
<td>0.121</td>
</tr>
<tr>
<td align="right">21</td>
<td align="right">3018</td>
<td align="right">497</td>
<td>0.165</td>
</tr>
<tr>
<td align="right">22</td>
<td align="right">3894</td>
<td align="right">441</td>
<td>0.113</td>
</tr>
<tr>
<td align="right">23</td>
<td align="right">4402</td>
<td align="right">447</td>
<td>0.102</td>
</tr>
<tr>
<td align="right">24</td>
<td align="right">3149</td>
<td align="right">394</td>
<td>0.125</td>
</tr>
<tr>
<td align="right">25</td>
<td align="right">4390</td>
<td align="right">509</td>
<td>0.116</td>
</tr>
<tr>
<td align="right">26</td>
<td align="right">3044</td>
<td align="right">580</td>
<td>0.191</td>
</tr>
<tr>
<td align="right">27</td>
<td align="right">4292</td>
<td align="right">605</td>
<td>0.141</td>
</tr>
<tr>
<td align="right">28</td>
<td align="right">3940</td>
<td align="right">675</td>
<td>0.171</td>
</tr>
<tr>
<td align="right">29</td>
<td align="right">4289</td>
<td align="right">491</td>
<td>0.114</td>
</tr>
<tr>
<td align="right">30</td>
<td align="right">4652</td>
<td align="right">466</td>
<td>0.100</td>
</tr>
<tr>
<td align="right">31</td>
<td align="right">4863</td>
<td align="right">498</td>
<td>0.102</td>
</tr>
<tr>
<td align="right">32</td>
<td align="right">4290</td>
<td align="right">464</td>
<td>0.108</td>
</tr>
<tr>
<td align="right">33</td>
<td align="right">4850</td>
<td align="right">489</td>
<td>0.101</td>
</tr>
<tr>
<td align="right">34</td>
<td align="right">5865</td>
<td align="right">591</td>
<td>0.101</td>
</tr>
<tr>
<td align="right">35</td>
<td align="right">4961</td>
<td align="right">739</td>
<td>0.149</td>
</tr>
<tr>
<td align="right">36</td>
<td align="right">4873</td>
<td align="right">861</td>
<td>0.177</td>
</tr>
<tr>
<td align="right">37</td>
<td align="right">8945</td>
<td align="right">964</td>
<td>0.108</td>
</tr>
<tr>
<td align="right">38</td>
<td align="right">9554</td>
<td align="right">994</td>
<td>0.104</td>
</tr>
<tr>
<td align="right">39</td>
<td align="right">8897</td>
<td align="right">1067</td>
<td>0.120</td>
</tr>
<tr>
<td align="right">40</td>
<td align="right">10457</td>
<td align="right">1270</td>
<td>0.121</td>
</tr>
<tr>
<td align="right">41</td>
<td align="right">7239</td>
<td align="right">889</td>
<td>0.123</td>
</tr>
<tr>
<td align="right">42</td>
<td align="right">6835</td>
<td align="right">1233</td>
<td>0.180</td>
</tr>
<tr>
<td align="right">43</td>
<td align="right">7334</td>
<td align="right">1252</td>
<td>0.171</td>
</tr>
<tr>
<td align="right">44</td>
<td align="right">8115</td>
<td align="right">1056</td>
<td>0.130</td>
</tr>
<tr>
<td align="right">45</td>
<td align="right">6317</td>
<td align="right">1068</td>
<td>0.169</td>
</tr>
<tr>
<td align="right">46</td>
<td align="right">9684</td>
<td align="right">974</td>
<td>0.101</td>
</tr>
<tr>
<td align="right">47</td>
<td align="right">8064</td>
<td align="right">1119</td>
<td>0.139</td>
</tr>
<tr>
<td align="right">48</td>
<td align="right">6287</td>
<td align="right">1251</td>
<td>0.199</td>
</tr>
<tr>
<td align="right">49</td>
<td align="right">10319</td>
<td align="right">1341</td>
<td>0.130</td>
</tr>
<tr>
<td align="right">50</td>
<td align="right">8146</td>
<td align="right">1107</td>
<td>0.136</td>
</tr>
<tr>
<td align="right">51</td>
<td align="right">8631</td>
<td align="right">1237</td>
<td>0.143</td>
</tr>
<tr>
<td align="right">52</td>
<td align="right">10913</td>
<td align="right">1309</td>
<td>0.120</td>
</tr>
<tr>
<td align="right">53</td>
<td align="right">7086</td>
<td align="right">1364</td>
<td>0.192</td>
</tr>
<tr>
<td align="right">54</td>
<td align="right">8863</td>
<td align="right">2121</td>
<td>0.239</td>
</tr>
<tr>
<td align="right">55</td>
<td align="right">5241</td>
<td align="right">436</td>
<td>0.083</td>
</tr>
</tbody>
</table>
<p>Script for generating this is:</p>
<pre class="line-numbers"><code class="language-bash">for k in `seq 54 -1 0`; do
    let km=&quot;55-$k&quot;; i=access.log.$k; wci=`cat $i | wc -l`;
    filt=`accesslogFilter $i | wc -l`; let pr=&quot;1.0*$filt/$wci&quot;;
    printf &quot; %2d | %5d | %4d | %6.3f\n&quot; $km $wci $filt $pr;
done
</code></pre>
<div class="chartarea" id="container4"></div>
<p>Added 10-Dec-2023: <a href="https://github.com/mitchellkrogza">Mitchell Krog</a> also has lists of IP addresses, bot-names, class C nets, etc.</p>
<script src="https://cdn.jsdelivr.net/npm/echarts@5.5.1/dist/echarts.min.js"></script>
<script>

let chartDom1 = document.getElementById('container1');
let ipAddr = echarts.init(chartDom1);
let app = {};

let ipAddrOption = {
    title: {
        text: 'Filtered IP Addresses',
        subtext: 'This Blog 2021',
        left: 'center'
    },
    tooltip: { trigger: 'item' },
    legend: { orient: 'vertical', left: 'left' },
    series: [ {
        name: 'Access From',
        type: 'pie',
        radius: '50%',
        data: [
            { value: 1998, name:'computeAWS' },
            { value: 11478, name:'local' },
            { value: 305, name:'shodan.io' },
            { value: 24997, name:'startdedicated' },
            { value: 1123, name:'various' }
        ],
        emphasis: {
            itemStyle: { shadowBlur: 10, shadowOffsetX: 0, shadowColor: 'rgba(0, 0, 0, 0.5)' }
        }
    } ]
};


let chartDom2 = document.getElementById('container2');
let httpStatus = echarts.init(chartDom2);

let httpStatusOption = {
    title: {
        text: 'HTTP Status Code',
        subtext: 'This Blog 2021',
        left: 'center'
    },
    tooltip: { trigger: 'item' },
    legend: { orient: 'vertical', left: 'left' },
    series: [ {
        name: 'Occured',
        type: 'pie',
        radius: '50%',
        data: [
            { value:16033, name:301 },
            { value:15, name:302 },
            { value:16, name:400 },
            { value:67, name:403 },
            { value:48222, name:404 },
            { value:3877, name:405 },
            { value:91, name:500 },
            { value:126, name:501 },
            { value:981, name:503 }
        ],
        emphasis: {
            itemStyle: { shadowBlur: 10, shadowOffsetX: 0, shadowColor: 'rgba(0, 0, 0, 0.5)' }
        }
    } ]
};


let chartDom3 = document.getElementById('container3');
let bot = echarts.init(chartDom3);

let botOption = {
    title: {
        text: 'Bots & Crawlers',
        subtext: 'This Blog 2021',
        left: 'center'
    },
    tooltip: { trigger: 'item' },
    //legend: { orient: 'vertical', left: 'right' },
    series: [ {
        name: 'Occured',
        type: 'pie',
        radius: '50%',
        data: [
            { value:326, name:'adsbot' },
            { value:932, name:'adscanner' },
            { value:5163, name:'ahrefsbot' },
            { value:325, name:'applebot' },
            { value:18, name:'archive.org_bot' },
            { value:426, name:'baiduspider' },
            { value:1011, name:'bingbot' },
            { value:1105, name:'blexbot' },
            { value:2, name:'ccbot' },
            { value:1131, name:'censysinspect' },
            { value:182, name:'clark-crawler2' },
            { value:39, name:'crawler' },
            { value:88, name:'crawler.php' },
            { value:4, name:'criteobot' },
            { value:196, name:'curl' },
            { value:379, name:'dataforseobot' },
            { value:1688, name:'dotbot' },
            { value:8, name:'facebookexternalhit' },
            { value:1, name:'feedsearch-crawler' },
            { value:16, name:'fluid' },
            { value:226, name:'go-http-client' },
            { value:7016, name:'googlebot' },
            { value:34, name:'ioncrawl' },
            { value:19, name:'ltx71' },
            { value:2059, name:'mediapartners-google' },
            { value:410, name:'netestate' },
            { value:1, name:'nicecrawler' },
            { value:346, name:'nuclei' },
            { value:1088, name:'petalbot' },
            { value:77, name:'proximic' },
            { value:4, name:'pulsepoint-ads.txt-crawler' },
            { value:342, name:'python-requests' },
            { value:6609, name:'semrushbot' },
            { value:159, name:'semrushbot-ba' },
            { value:26, name:'sitecheckerbotcrawler' },
            { value:699, name:'sitelockspider' },
            { value:68, name:'twitterbot' },
            { value:2, name:'ucrawl' },
            { value:4, name:'virustotal' },
            { value:1715, name:'yandexbot' }
        ],
        emphasis: {
            itemStyle: { shadowBlur: 10, shadowOffsetX: 0, shadowColor: 'rgba(0, 0, 0, 0.5)' }
        }
    } ]
};

let chartDom4 = document.getElementById('container4');
let filterRatio = echarts.init(chartDom4);
let filterRatioOption = {
    xAxis: {
        type: 'category',
        data: [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55]
    },
    yAxis: { type: 'value' },
    tooltip: { trigger:'axis' },
    series: [ {
        data: [  0.192,  0.096,  0.141,  0.304,  0.171,  0.199,  0.162,  0.102,  0.105,  0.047,  0.082,  0.117,  0.221,  0.125,  0.144,  0.098,  0.153,  0.133,  0.140,  0.121,  0.165,  0.113,  0.102,  0.125,  0.116,  0.191,  0.141,  0.171,  0.114,  0.100,  0.102,  0.108,  0.101,  0.101,  0.149,  0.177,  0.108,  0.104,  0.120,  0.121,  0.123,  0.180,  0.171,  0.130,  0.169,  0.101,  0.139,  0.199,  0.130,  0.136,  0.143,  0.120,  0.192,  0.239,  0.083 ],
        type: 'line',
        smooth: true
    } ]
};

if (ipAddrOption && typeof ipAddrOption === 'object') { ipAddr.setOption(ipAddrOption); }
if (httpStatusOption && typeof httpStatusOption === 'object') { httpStatus.setOption(httpStatusOption); }
if (botOption && typeof botOption === 'object') { bot.setOption(botOption); }
if (filterRatioOption && typeof filterRatioOption === 'object') { filterRatio.setOption(filterRatioOption); }

</script>
	</article>
	</main>

	<br><br>
	<aside>
	<p>Share via
	<a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Feklausmeier.goip.de/blog/2021/12-13-filtering-bots-and-crawlers-from-access-log" title="Post on Facebook" target=_blank>Facebook</a>,
	<a href="https://twitter.com/intent/tweet?text=Filtering+Bots+and+Crawlers+from+Access.log%0Ahttps%3A%2F%2Feklausmeier.goip.de/blog/2021/12-13-filtering-bots-and-crawlers-from-access-log" title="Post on Twitter" target=_blank>Twitter/&Xopf;</a>,
	<a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Feklausmeier.goip.de/blog/2021/12-13-filtering-bots-and-crawlers-from-access-log" title="Post on LinkedIn" target=_blank>LinkedIn</a>,
	<a href="https://www.xing.com/spi/shares/new?url=https%3A%2F%2Feklausmeier.goip.de/blog/2021/12-13-filtering-bots-and-crawlers-from-access-log" title="Post on Xing" target=_blank>Xing</a>,
	<a href="https://share.flipboard.com/bookmarklet/popout?v=2&amp;title=Filtering+Bots+and+Crawlers+from+Access.log&amp;url=https%3A%2F%2Feklausmeier.goip.de/blog/2021/12-13-filtering-bots-and-crawlers-from-access-log" title="Post on Flipboard" target=_blank>Flipboard</a>,
	<a href="https://getpocket.com/save?url=https%3A%2F%2Feklausmeier.goip.de/blog/2021/12-13-filtering-bots-and-crawlers-from-access-log" title="Post on Pocket" target=_blank>Pocket</a>,
	<a href="https://reddit.com/submit?&amp;url=https%3A%2F%2Feklausmeier.goip.de/blog/2021/12-13-filtering-bots-and-crawlers-from-access-log&amp;title=Filtering+Bots+and+Crawlers+from+Access.log" title="Post on Reddit" target=_blank>Reddit</a>,
	<a href="mailto:?subject=Filtering+Bots+and+Crawlers+from+Access.log&amp;body=https%3A%2F%2Feklausmeier.goip.de/blog/2021/12-13-filtering-bots-and-crawlers-from-access-log" title="Send via e-mail">e-mail</a>,
	<a href="whatsapp://send?text=Filtering+Bots+and+Crawlers+from+Access.log%0Ahttps%3A%2F%2Feklausmeier.goip.de/blog/2021/12-13-filtering-bots-and-crawlers-from-access-log" title="Post on WhatsApp">WhatsApp</a>
	</p>

	<p>
	<br><strong><a href=/aux/categories>Categories</a>: </strong><a href=/aux/categories/#web-server>web-server</a>
	<br><strong><a href=/aux/tags>Tags</a>: </strong><a href=/aux/tags/#Hiawatha>Hiawatha</a>, <a href=/aux/tags/#access.log>access.log</a>, <a href=/aux/tags/#bot>bot</a>, <a href=/aux/tags/#crawler>crawler</a>
	<br><strong>Author: </strong>Elmar Klausmeier
	</p>
	<p><a href="/blog/2021">Index for the year 2021.</a></p>
	<p>Blog posts with the same categories.</p>
	<p><i>web-server:</i></p>
	<ol>
		<li><a href="/blog/2013/12-09-wikipedia-infrastructure-as-of-2013">2013-12-09: Wikipedia Infrastructure as of 2013</a></li>
		<li><a href="/blog/2015/11-07-nginx-413-request-entity-too-large-file-upload-issue">2015-11-07: nginx: 413 Request Entity Too Large - File Upload Issue</a></li>
		<li><a href="/blog/2018/03-06-set-up-hiawatha-web-server">2018-03-06: Set-Up Hiawatha Web-Server</a></li>
		<li><a href="/blog/2018/03-14-set-up-lets-encrypt-for-hiawatha-web-server">2018-03-14: Set-Up "Let's Encrypt" for Hiawatha Web-Server</a></li>
		<li><a href="/blog/2021/05-22-using-goaccess-with-hiawatha-web-server">2021-05-22: Using GoAccess with Hiawatha Web-Server</a></li>
		<li><a href="/blog/2021/05-29-configure-lighttpd-with-php-and-https">2021-05-29: Configure Lighttpd With PHP and HTTPS</a></li>
		<li><a href="/blog/2021/06-03-matomo-with-hiawatha">2021-06-03: Matomo with Hiawatha</a></li>
		<li><a href="/blog/2021/11-30-awstats-and-hiawatha">2021-11-30: AWStats and Hiawatha</a></li>
		<li><a href="/blog/2021/12-14-url-count-statistics">2021-12-14: URL Count Statistics</a></li>
		<li><a href="/blog/2022/01-04-hashover-comment-system-with-hiawatha">2022-01-04: HashOver Comment System with Hiawatha</a></li>
		<li><a href="/blog/2022/03-06-reverseproxy-and-urltoolkit-in-hiawatha">2022-03-06: ReverseProxy and UrlToolkit in Hiawatha</a></li>
		<li><a href="/blog/2023/06-30-data-centers-in-africa">2023-06-30: Data Centers in Africa</a></li>
		<li><a href="/blog/2023/08-13-installing-openlitespeed-on-arch-linux">2023-08-13: Installing OpenLiteSpeed on Arch Linux</a></li>
		<li><a href="/blog/2023/08-29-from-hiawatha-to-nginx">2023-08-29: From Hiawatha to NGINX</a></li>
		<li><a href="/blog/2023/08-30-performance-comparison-gzip-vs-brotli">2023-08-30: Performance Comparison gzip vs Brotli</a></li>
		<li><a href="/blog/2024/02-19-letsencrypt-certbot-usage-with-nginx">2024-02-19: Let's Encrypt Certbot Usage with NGINX</a></li>
		<li><a href="/blog/2024/04-13-installing-and-configuring-the-h2o-web-server">2024-04-13: Installing and Configuring the H2O Web-Server</a></li>
		<li><a href="/blog/2024/10-01-xhprof-with-nginx">2024-10-01: XHProf with NGINX</a></li>
		<li><a href="/blog/2024/12-31-website-analytics">2024-12-31: Website Analytics</a></li>
	</ol>
	</aside>


	<footer>
		<p><br><br>Generated 23-Mar-25 16:47 CET (Europe/Berlin) using <a href="/blog/2021/10-31-simplified-saaze">Simplified Saaze</a>, rendered in 157.31 ms<br><br>
		</p>
	</footer>


<script>
function darkLightToggle(setLocal=1) {
	if (setLocal) {
		let dts = localStorage.getItem("dark-theme") ?? 0;
		if (dts != 1 && dts != 0) dts = 0;	// in case the user has tampered with localStorage
		localStorage.setItem("dark-theme", 1 - dts);
	}
	document.body.classList.toggle("dark-mode");
	darkLightIcon.innerHTML = document.body.classList.contains("dark-mode") ?
		'<g><path d="M58.57,25.81c-2.13-3.67-0.87-8.38,2.8-10.51c3.67-2.13,8.38-0.88,10.51,2.8l9.88,17.1c2.13,3.67,0.87,8.38-2.8,10.51 c-3.67,2.13-8.38,0.88-10.51-2.8L58.57,25.81L58.57,25.81z M120,51.17c19.01,0,36.21,7.7,48.67,20.16 C181.12,83.79,188.83,101,188.83,120c0,19.01-7.7,36.21-20.16,48.67c-12.46,12.46-29.66,20.16-48.67,20.16 c-19.01,0-36.21-7.7-48.67-20.16C58.88,156.21,51.17,139.01,51.17,120c0-19.01,7.7-36.21,20.16-48.67 C83.79,58.88,101,51.17,120,51.17L120,51.17z M158.27,81.73c-9.79-9.79-23.32-15.85-38.27-15.85c-14.95,0-28.48,6.06-38.27,15.85 c-9.79,9.79-15.85,23.32-15.85,38.27c0,14.95,6.06,28.48,15.85,38.27c9.79,9.79,23.32,15.85,38.27,15.85 c14.95,0,28.48-6.06,38.27-15.85c9.79-9.79,15.85-23.32,15.85-38.27C174.12,105.05,168.06,91.52,158.27,81.73L158.27,81.73z M113.88,7.71c0-4.26,3.45-7.71,7.71-7.71c4.26,0,7.71,3.45,7.71,7.71v19.75c0,4.26-3.45,7.71-7.71,7.71 c-4.26,0-7.71-3.45-7.71-7.71V7.71L113.88,7.71z M170.87,19.72c2.11-3.67,6.8-4.94,10.48-2.83c3.67,2.11,4.94,6.8,2.83,10.48 l-9.88,17.1c-2.11,3.67-6.8,4.94-10.48,2.83c-3.67-2.11-4.94-6.8-2.83-10.48L170.87,19.72L170.87,19.72z M214.19,58.57 c3.67-2.13,8.38-0.87,10.51,2.8c2.13,3.67,0.88,8.38-2.8,10.51l-17.1,9.88c-3.67,2.13-8.38,0.87-10.51-2.8 c-2.13-3.67-0.88-8.38,2.8-10.51L214.19,58.57L214.19,58.57z M232.29,113.88c4.26,0,7.71,3.45,7.71,7.71 c0,4.26-3.45,7.71-7.71,7.71h-19.75c-4.26,0-7.71-3.45-7.71-7.71c0-4.26,3.45-7.71,7.71-7.71H232.29L232.29,113.88z M220.28,170.87 c3.67,2.11,4.94,6.8,2.83,10.48c-2.11,3.67-6.8,4.94-10.48,2.83l-17.1-9.88c-3.67-2.11-4.94-6.8-2.83-10.48 c2.11-3.67,6.8-4.94,10.48-2.83L220.28,170.87L220.28,170.87z M181.43,214.19c2.13,3.67,0.87,8.38-2.8,10.51 c-3.67,2.13-8.38,0.88-10.51-2.8l-9.88-17.1c-2.13-3.67-0.87-8.38,2.8-10.51c3.67-2.13,8.38-0.88,10.51,2.8L181.43,214.19 L181.43,214.19z M126.12,232.29c0,4.26-3.45,7.71-7.71,7.71c-4.26,0-7.71-3.45-7.71-7.71v-19.75c0-4.26,3.45-7.71,7.71-7.71 c4.26,0,7.71,3.45,7.71,7.71V232.29L126.12,232.29z M69.13,220.28c-2.11,3.67-6.8,4.94-10.48,2.83c-3.67-2.11-4.94-6.8-2.83-10.48 l9.88-17.1c2.11-3.67,6.8-4.94,10.48-2.83c3.67,2.11,4.94,6.8,2.83,10.48L69.13,220.28L69.13,220.28z M25.81,181.43 c-3.67,2.13-8.38,0.87-10.51-2.8c-2.13-3.67-0.88-8.38,2.8-10.51l17.1-9.88c3.67-2.13,8.38-0.87,10.51,2.8 c2.13,3.67,0.88,8.38-2.8,10.51L25.81,181.43L25.81,181.43z M7.71,126.12c-4.26,0-7.71-3.45-7.71-7.71c0-4.26,3.45-7.71,7.71-7.71 h19.75c4.26,0,7.71,3.45,7.71,7.71c0,4.26-3.45,7.71-7.71,7.71H7.71L7.71,126.12z M19.72,69.13c-3.67-2.11-4.94-6.8-2.83-10.48 c2.11-3.67,6.8-4.94,10.48-2.83l17.1,9.88c3.67,2.11,4.94,6.8,2.83,10.48c-2.11,3.67-6.8,4.94-10.48,2.83L19.72,69.13L19.72,69.13z"/></g>' :
		'<g><path d="M49.06,1.27c2.17-0.45,4.34-0.77,6.48-0.98c2.2-0.21,4.38-0.31,6.53-0.29c1.21,0.01,2.18,1,2.17,2.21 c-0.01,0.93-0.6,1.72-1.42,2.03c-9.15,3.6-16.47,10.31-20.96,18.62c-4.42,8.17-6.1,17.88-4.09,27.68l0.01,0.07 c2.29,11.06,8.83,20.15,17.58,25.91c8.74,5.76,19.67,8.18,30.73,5.92l0.07-0.01c7.96-1.65,14.89-5.49,20.3-10.78 c5.6-5.47,9.56-12.48,11.33-20.16c0.27-1.18,1.45-1.91,2.62-1.64c0.89,0.21,1.53,0.93,1.67,1.78c2.64,16.2-1.35,32.07-10.06,44.71 c-8.67,12.58-22.03,21.97-38.18,25.29c-16.62,3.42-33.05-0.22-46.18-8.86C14.52,104.1,4.69,90.45,1.27,73.83 C-2.07,57.6,1.32,41.55,9.53,28.58C17.78,15.57,30.88,5.64,46.91,1.75c0.31-0.08,0.67-0.16,1.06-0.25l0.01,0l0,0L49.06,1.27 L49.06,1.27z"/></g>' ;
}
const darkLightIcon = document.querySelector("#darkLightIcon");
addEventListener('load', (event) => {
	let dst = localStorage.getItem("dark-theme");
	if (dst == 1	// explicit user request
	|| (dst == null && window.matchMedia('(prefers-color-scheme: dark)').matches )) { // as per Browser setting
		darkLightToggle(0);
	} else {
		document.body.classList.remove('dark-mode');
	}
});
</script>

	<script src="/jscss/prism.js"></script>


</body>
</html>
