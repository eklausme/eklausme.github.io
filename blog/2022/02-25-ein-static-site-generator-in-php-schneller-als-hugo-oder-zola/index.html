<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<link href="data:image/x-icon;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABbklEQVQ4T2OUn/2+loGRoZqR4T87AwngPwPjT4b/DK2M8nPe/yBVM8wekCGMCnPe/SfBYgylKAYk67AzMCEp2ff4N4O+KAvDtz//GXY8+M1gKcnCoCHEzDD/6k+4KhQD7iQKMDAyMjD8h7qp6OBXhgx9DoZX3/4zJOz8wrDMk4eBn52RwXvDZ9wGgExvPfUdrmBbIC/YgKojXxkOhvEzzLz0g6Hn7A/SDPj48z/Dz7//GcwlWBmc1nxkeP4VEWwYXgB6l+EnkJh75QfDpAs/GUAu0BRiYfgH9FfZoa8Ma+/8RglIDAMuvfnLcPTZb4aTz/8wHHn2B8WAEqAB6wkZgC0MQF74/ZeBwUSChcFp9UeGF8AwgQEMF+AKxNpjXxn2h/AzTAcGYi++QMQXjSu8eBh42fBEY7ouOzgdwMDeR78ZDKAJaev93wzWUiwMWsCENPsKjoRETpKmPDOBsjPQ2dXABExSdmYA5kRg0mgFAI5W3Y01yGITAAAAAElFTkSuQmCC" rel="icon" type="image/x-icon">

	<link rel="canonical" href="https://eklausmeier.goip.de/blog/2022/02-25-ein-static-site-generator-in-php-schneller-als-hugo-oder-zola">
	<link rel="alternate" type="application/rss+xml" title="RSS" href="https://eklausmeier.goip.de/feed.xml">
	<meta name="author" content="Elmar Klausmeier">
	<meta name="copyright" content="Elmar Klausmeier">
	<meta name="generator" content="Simplified Saaze">

<script src="https://analytics.ahrefs.com/analytics.js" data-key="yTUhMMEASRjeaM8armGiZQ" async></script>

	<title>Ein Static Site Generator in PHP, schneller als Hugo oder Zola - Elmar Klausmeier's Blog on Computers, Programming, and Mathematics</title>

	<link href="/jscss/prism.css" rel=stylesheet>
<style>
/* CSS for Elmar Klausmeier's blog
   09-Aug-2021: Initial revision
   25-Aug-2021: Added transformed anchor a
   27-Jun-2022: dark/light switcher, see https://ihuoma.hashnode.dev/darklight-mode-switcher
   11-Jul-2022: p+ul+ol same font
   09-Aug-2022: fixed <a...> on tablets, removed commented-out stuff
   28-May-2023: centered content, added background color
   16-Oct-2023: added Google fonts
   23-Oct-2023: added pagefind dark mode
   16-Nov-2023: added kbd
   04-Nov-2024: centered tables, aside on the left side
*/

@import url("https://fonts.googleapis.com/css2?family=Merriweather:ital,wght@0,400;0,700;1,400;1,700&family=Noto+Sans+Mono:wght@400;700&family=UnifrakturMaguntia&display=swap");

:root { --bgSurrounding:#fffff6; --bgAcolor:white; color:black; --h1Color:DarkBlue; --thColor:LightBlue; --nthChild:#f2f2f2; --klmwidth:46rem; }
.dark-mode { background-color:#22160B; color:white; --bgAcolor:black; --h1Color:LightBlue; --thColor:DarkBlue; --nthChild:#935116;
	--pagefind-ui-primary: #eeeeee; --pagefind-ui-text: #eeeeee; --pagefind-ui-background: #152028; --pagefind-ui-border: #152028; --pagefind-ui-tag: #152028;
}
body {
	background-color: var(--bgSurrounding);
	font-family:Merriweather,Georgia,"Times New Roman",ui-serif,Cambria,Times,serif;
	font-display:optional;
	/*font-size: 28px;  font-weight: 100;*/
	margin: auto;
	width:var(--klmwidth)
}
h1::first-letter, h2::first-letter { font-family:UnifrakturMaguntia; color:brown }
article, aside { background-color: var(--bgAcolor); border-radius:8px }

a { color:inherit }
a:hover { background-color:sandybrown }
strong { font-weight:900 }
.symbols { font-family:'Noto Sans Symbols 2'; font-size:36px }


img[alt=Photo] { width:var(--klmwidth) }

table { margin-left:auto; margin-right:auto }
img { border-radius:8px; margin-left:auto; margin-right:auto; display:block }
blockquote { font-style:italic; padding-left:0.4rem; border-left:2px solid #ccc }
td { border:1px solid Black; border-collapse:collapse; padding:0.3rem 0.5rem 0.3rem 0.5rem }
th { border:1px solid Black; background-color:var(--thColor); padding:0.3rem 0.5rem 0.3rem 0.5rem; position:sticky; top:0 }
tr:nth-child(even) { background-color:var(--nthChild); }

kbd {   /* https://www.rgagnon.com/jsdetails/js-nice-effect-the-KBD-tag.html */
	margin: 0px 0.1em;
	padding: 0.1em 0.6em;
	border-radius: 3px;
	border: 1px solid rgb(204, 204, 204);
	color: rgb(51, 51, 51);
	line-height: 1.4;
	font-family: Arial,Helvetica,sans-serif;
	font-size: 16px;
	display: inline-block;
	box-shadow: 0px 1px 0px rgba(0,0,0,0.2), inset 0px 0px 0px 2px #ffffff;
	background-color: rgb(247, 247, 247);
	-moz-box-shadow: 0 1px 0px rgba(0, 0, 0, 0.2), 0 0 0 2px #ffffff inset;
	-webkit-box-shadow: 0 1px 0px rgba(0, 0, 0, 0.2), 0 0 0 2px #ffffff inset;
	-moz-border-radius: 3px;
	-webkit-border-radius: 3px;
	text-shadow: 0 1px 0 #fff;
}

@media screen and (min-width:50rem) {
	main, aside { max-width:46rem }
	h1 { font-size:3em; color:var(--h1Color) }
	h2 { font-size:2.7em; color:var(--h1Color) }
	h3 { font-size:2.2em; color:var(--h1Color) }
	h4 { font-size:2em; color:var(--h1Color) }
	p { line-height:1.7; font-size:1.3rem }
	blockquote { line-height:1.5; font-size:1.3rem }
	ul, ol { line-height:1.5; font-size:1.3rem }
	li { margin-bottom:0.6rem }
	pre { color:#e2e8f0; background-color:#2d3748; border-radius:0.4rem; overflow-x:auto; padding:1.4rem }
	pre code { color:#e2e8f0; line-height:1.8; font-size:1.1rem; font-weight:400; }
	code[class*="language-"], pre[class*="language-"] { line-height:1.5; font-size:1.15rem }
}
@media screen and (max-width:50rem) {
	main, aside, header, footer { max-width:46rem; margin-left:0.3rem; margin-right:0.3rem }
	/*body { width:100% }*/
	h1 { font-size:2.2em; color:var(--h1Color) }
	h2 { font-size:1.7em; color:var(--h1Color) }
	h3 { font-size:1.4em; color:var(--h1Color) }
	h4 { font-size:1.2em; color:var(--h1Color) }
	p { line-height:1.5; font-size:1.0rem }
	ul, ol { line-height:1.4; font-size:1.0rem }
	li { margin-bottom:0.4rem }
	pre { color:#e2e8f0; background-color:#2d3748; border-radius:0.4rem; overflow-x:auto }
	pre code { color:#e2e8f0; line-height:1.3; font-size:1em }
}
@media screen and (max-width:46rem) {
	body, main, aside, header, footer { max-width:45rem; margin-left:0.3rem; margin-right:0.3rem }
}
@media screen and (max-width:34rem) {
	body, main, aside, header, footer { max-width:33rem; margin-left:0.3rem; margin-right:0.3rem }
}
@media screen and (max-width:24rem) {
	body, main, aside, header, footer { max-width:23rem; margin-left:0.3rem; margin-right:0.3rem }
}
@media screen and (max-width:20rem) {
	body, main, aside, header, footer { max-width:19rem; margin-left:0.3rem; margin-right:0.3rem }
}

.dimmedColor { color:Gray }
footer { font-family:sans-serif; color:Gray }
.chartarea { height:400px; width:600px }

/* Copied from TailwindCSS 2.0 typography.min.css */
pre, code { font-family:"Noto Sans Mono" }
code { color:inherit; font-weight:700; font-size:inherit }
code::before { content:"`" }
code::after { content:"`" }
pre > code { font-weight:400 }
pre code::before { content:"" }
pre code::after{ content:"" }


nav { border-radius:8px }
/* Copied from W.S.Toh: https://code-boxx.com/simple-responsive-pure-css-hamburger-menu */
#hamnav {	/* [ON BIG SCREENS] (A) WRAPPER */
	/*width: var(--klmwidth);*/
	background: Lightgray;
	/* Optional */
	position: sticky;
	top: 0;
}

#hamitems { display:flex }	/* (B) HORIZONTAL MENU ITEMS */
#hamitems a {
	flex-grow: 2;
	/*flex-basis: 0;*/
	padding: 12px;
	/*color: white;*/
	text-decoration: none;
	margin-left: 0rem;
	text-align: left;
	font-size:1.6rem;
}
/*#hamitems a:hover { background:Sandybrown }*/

#hamnav label, #hamburger { display:none }	/* (C) HIDE HAMBURGER */

.grid-container {	/* Holy Grail Layout */
	display:grid;
	grid-template-areas:
		'header'
		'main'
		'aside'
		'footer';
	gap: 0.1rem;
	justify-content:center;
	text-wrap:wrap;
	text-align:left;
}

header { grid-area:header }
main { grid-area:main }
aside { grid-area:aside; background-color:moccasin }
footer { grid-area:footer }

@media screen and (min-width:95rem) {
	.grid-container {
		display: grid;
		width: 100%;
		grid-template-columns: 40rem 47rem;
		grid-template-areas:
			'header header'
			'aside main'
			'footer footer';
		gap: 2rem 4rem;
		background-color: var(--bgSurrounding);
		padding: 0.8rem;
	}
}

@media screen and (max-width: 50rem) {	/* [ON SMALL SCREENS] */
	#hamitems a {	/* (A) BREAK INTO VERTICAL MENU */
		box-sizing: border-box;
		display: block;
		/*width: 100%;*/
		border-top: 1px solid #333;
	}
	#hamnav label {	/* (B) SHOW HAMBURGER ICON */
		display: inline-block;
		color: white;
		background: DarkGreen;	/*#a02620;*/
		font-style: normal;
		font-size: 1.2em;
		padding: 10px;
	}
	#hamitems { display:none }	/* (C) TOGGLE SHOW/HIDE MENU */
	#hamnav input:checked ~ #hamitems { display:block }
}



</style>

<link href="/pagefind/pagefind-ui.css" rel="stylesheet">
<script src="/pagefind/pagefind-ui.js"></script>
<script>
	window.addEventListener('DOMContentLoaded', (event) => {
		new PagefindUI({ element: "#search", showSubResults: true });
	});
</script>

</head>

<body class=grid-container>

	<header> 
		<nav id=hamnav>	<!-- (A) MENU WRAPPER -->
		<label for=hamburger>&#9776;</label><!-- (B) THE HAMBURGER -->
			<input type=checkbox id=hamburger>
		<div id=hamitems>	<!-- (C) MENU ITEMS -->
			<a href="/blog">Blog</a>
			<a href="/aux/about">About</a>
			<a href="/music" aria-label="Music"><svg version="1.1" id="musicIcon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height=32 width=32 x="0px" y="0px" viewBox="0 0 104.23 122.88" style="enable-background:new 0 0 104.23 122.88; fill:Navy" xml:space="preserve"><style type="text/css">.st0{fill-rule:evenodd;clip-rule:evenodd;}</style><g><path class="st0" d="M87.9,78.04c2.74-0.48,5.33-0.4,7.6,0.13V24.82L39.05,41.03v61.95c0.03,0.34,0.05,0.69,0.05,1.03 c0,0,0,0.01,0,0.01c0,8.34-8.75,16.62-19.55,18.49C8.76,124.37,0,119.12,0,110.77c0-8.34,8.76-16.62,19.55-18.48 c4.06-0.7,7.84-0.39,10.97,0.71l0-76.26h0.47L104.04,0v85.92c0.13,0.63,0.2,1.27,0.2,1.91c0,0,0,0,0,0.01 c0,6.97-7.32,13.89-16.33,15.44c-9.02,1.56-16.33-2.83-16.33-9.8C71.57,86.51,78.88,79.59,87.9,78.04L87.9,78.04L87.9,78.04z"/></g></svg></a>
			<a href="/gallery" aria-label="Gallery"><svg version="1.1" id="galleryIcon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height=32 width=32 x="0px" y="0px" viewBox="0 0 122.88 90.78" style="enable-background:new 0 0 122.88 90.78; fill:black" xml:space="preserve"><style type="text/css">.st0{fill-rule:evenodd;clip-rule:evenodd;}</style><g><path class="st0" d="M46.86,0.05h43.63l9.94,17.7h20.48c1.09,0,1.98,0.92,1.98,1.98v69.08c0,1.06-0.91,1.98-1.98,1.98H1.98 C0.92,90.78,0,89.89,0,88.81l0-69.08c0-1.09,0.89-1.98,1.98-1.98h9.21V11.4h11.38v6.35h12.36c2.57-5.08,5.14-10.15,7.71-15.23 C44.2-0.57,43.34,0.05,46.86,0.05L46.86,0.05z M110.07,26.5c3.26,0,5.9,2.64,5.9,5.9c0,3.26-2.64,5.9-5.9,5.9 c-3.26,0-5.9-2.64-5.9-5.9C104.18,29.14,106.82,26.5,110.07,26.5L110.07,26.5L110.07,26.5z M66.64,33.37 c9.87,0,17.88,8.01,17.88,17.88c0,9.87-8.01,17.88-17.88,17.88c-9.87,0-17.88-8.01-17.88-17.88 C48.76,41.38,56.77,33.37,66.64,33.37L66.64,33.37z M66.64,21.73c16.31,0,29.53,13.22,29.53,29.53c0,16.3-13.22,29.53-29.53,29.53 c-16.3,0-29.53-13.23-29.53-29.53C37.12,34.95,50.34,21.73,66.64,21.73L66.64,21.73z"/></g></svg></a>
			<a href="/aux/yearOverview" aria-label="Year Overview"><svg id="yearOverviewIcon" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" height=32 width=32 viewBox="0 0 122.88 121"><defs><style>.cls-1{fill:#ef4136;}.cls-1,.cls-3,.cls-5{fill-rule:evenodd;}.cls-2{fill:gray;}.cls-3{fill:#e6e6e6;}.cls-4{fill:#1a1a1a;}.cls-5{fill:#c72b20;}</style></defs><title>Year Overview</title><path class="cls-1" d="M11.52,6.67h99.84a11.57,11.57,0,0,1,11.52,11.52V44.94H0V18.19A11.56,11.56,0,0,1,11.52,6.67Zm24.79,9.75A9.31,9.31,0,1,1,27,25.73a9.31,9.31,0,0,1,9.31-9.31Zm49.79,0a9.31,9.31,0,1,1-9.31,9.31,9.31,9.31,0,0,1,9.31-9.31Z"/><path class="cls-2" d="M111.36,121H11.52A11.57,11.57,0,0,1,0,109.48V40H122.88v69.46A11.56,11.56,0,0,1,111.36,121Z"/><path class="cls-3" d="M12.75,117.31h97.38a9.1,9.1,0,0,0,9.06-9.06V40H3.69v68.23a9.09,9.09,0,0,0,9.06,9.06Z"/><path class="cls-4" d="M39.54,100.77V66H32.29V58.42l8.6-3.69H51.47v46Zm19.46,0V91.31L73.2,76.8a28.28,28.28,0,0,0,2.27-2.52A11.27,11.27,0,0,0,76.91,72a5.21,5.21,0,0,0,.53-2.27A4.18,4.18,0,0,0,77,67.61a2.82,2.82,0,0,0-1.51-1.2A7.94,7.94,0,0,0,72.83,66H59.73V56.58q3-.69,6.73-1.26a56.19,56.19,0,0,1,8.64-.59,20.11,20.11,0,0,1,8.52,1.48A8.86,8.86,0,0,1,88,60.57a17,17,0,0,1,1.32,7.07,16.89,16.89,0,0,1-3.1,10.08A31.85,31.85,0,0,1,82.6,82l-7.87,8.06H90.59v10.69Z"/><path class="cls-5" d="M86.1,14.63a11.11,11.11,0,1,1-7.85,3.26l.11-.1a11.06,11.06,0,0,1,7.74-3.16Zm0,1.79a9.31,9.31,0,1,1-9.31,9.31,9.31,9.31,0,0,1,9.31-9.31Z"/><path class="cls-5" d="M36.31,14.63a11.11,11.11,0,1,1-7.85,3.26l.11-.1a11.08,11.08,0,0,1,7.74-3.16Zm0,1.79A9.31,9.31,0,1,1,27,25.73a9.31,9.31,0,0,1,9.31-9.31Z"/><path class="cls-4" d="M80.54,4.56C80.54,2,83,0,86.1,0s5.56,2,5.56,4.56V25.77c0,2.51-2.48,4.56-5.56,4.56s-5.56-2-5.56-4.56V4.56Z"/><path class="cls-4" d="M30.75,4.56C30.75,2,33.24,0,36.31,0s5.56,2,5.56,4.56V25.77c0,2.51-2.48,4.56-5.56,4.56s-5.56-2-5.56-4.56V4.56Z"/></svg></a>
			<a onclick="return darkLightToggle()" aria-label="Switch between light and dark mode"><svg version="1.1" id="darkLightIcon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="32" width="32" x="0px" y="0px" viewBox="0 0 122.8 122.8" style="enable-background:new 0 0 240 240" xml:space="preserve"><g><path d="M49.06,1.27c2.17-0.45,4.34-0.77,6.48-0.98c2.2-0.21,4.38-0.31,6.53-0.29c1.21,0.01,2.18,1,2.17,2.21 c-0.01,0.93-0.6,1.72-1.42,2.03c-9.15,3.6-16.47,10.31-20.96,18.62c-4.42,8.17-6.1,17.88-4.09,27.68l0.01,0.07 c2.29,11.06,8.83,20.15,17.58,25.91c8.74,5.76,19.67,8.18,30.73,5.92l0.07-0.01c7.96-1.65,14.89-5.49,20.3-10.78 c5.6-5.47,9.56-12.48,11.33-20.16c0.27-1.18,1.45-1.91,2.62-1.64c0.89,0.21,1.53,0.93,1.67,1.78c2.64,16.2-1.35,32.07-10.06,44.71 c-8.67,12.58-22.03,21.97-38.18,25.29c-16.62,3.42-33.05-0.22-46.18-8.86C14.52,104.1,4.69,90.45,1.27,73.83 C-2.07,57.6,1.32,41.55,9.53,28.58C17.78,15.57,30.88,5.64,46.91,1.75c0.31-0.08,0.67-0.16,1.06-0.25l0.01,0l0,0L49.06,1.27 L49.06,1.27z"/></g></svg></a>
			<a href="/aux/uses" aria-label="Uses"><svg class="svg-icon" width="34" height="34" style="vertical-align:middle; fill:DarkGreen; overflow:hidden" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M864 128l-704 0C140.8 128 128 140.8 128 160l0 512C128 691.2 140.8 704 160 704l236.8 0 0 128L256 832l0 64 512 0 0-64L627.2 832l0-128 236.8 0c19.2 0 32-12.8 32-32l0-512C896 140.8 883.2 128 864 128zM864 640c0 19.2-12.8 32-32 32L192 672c-19.2 0-32-12.8-32-32L160 192c0-19.2 12.8-32 32-32l640 0c19.2 0 32 12.8 32 32L864 640z"  /></svg></a>
			<a href="/aux/blogroll" aria-label="Blogroll"><svg version="1.1" id="Blogroll" xmlns="http://www.w3.org/2000/svg" x="0" y="0" width="32" height="32"
				viewBox="0 0 482.136 482.135" style="enable-background:new 0 0 482.136 482.135; fill:Navy"
				xml:space="preserve"><g><path d="M455.482,198.184L326.829,326.832c-35.535,35.54-93.108,35.54-128.646,0l-42.881-42.886l42.881-42.876l42.884,42.876
		c11.845,11.822,31.064,11.846,42.886,0l128.644-128.643c11.816-11.831,11.816-31.066,0-42.9l-42.881-42.881
		c-11.822-11.814-31.064-11.814-42.887,0l-45.928,45.936c-21.292-12.531-45.491-17.905-69.449-16.291l72.501-72.526
		c35.535-35.521,93.136-35.521,128.644,0l42.886,42.881C491.018,105.045,491.018,162.663,455.482,198.184z M201.206,366.698
		l-45.903,45.9c-11.845,11.846-31.064,11.817-42.881,0l-42.884-42.881c-11.845-11.821-11.845-31.041,0-42.886l128.646-128.648
		c11.819-11.814,31.069-11.814,42.884,0l42.886,42.886l42.876-42.886l-42.876-42.881c-35.54-35.521-93.113-35.521-128.65,0
		L26.655,283.946c-35.538,35.545-35.538,93.146,0,128.652l42.883,42.882c35.51,35.54,93.11,35.54,128.646,0l72.496-72.499
		C246.724,384.578,222.588,379.197,201.206,366.698z"/></g></svg></a>
			<a href="/sitemap.html" aria-label="Sitemap"><svg id="sitemapIcon" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" height=32 width=32 viewBox="0 0 113.84 122.88"><defs><style>.cls-2{fill-rule:evenodd;}</style></defs><title>Sitemap</title><path class="cls-2" d="M1.78,4,.18,7.55H44.23L42.61,4H23a1.17,1.17,0,0,1-1.18-1.17V0H5.05V2.81A1.17,1.17,0,0,1,3.87,4Zm67.7,95.21,2.88,22.22a1.49,1.49,0,0,0,1.36,1.47h35c.81,0,1.26-.78,1.36-1.5l3.73-22.19Zm1.78-5.77L69.66,97h44l-1.62-3.57H92.44a1.17,1.17,0,0,1-1.18-1.17V89.44H74.52v2.81a1.17,1.17,0,0,1-1.17,1.17ZM66.87,55.49l2.89,22.22a1.48,1.48,0,0,0,1.35,1.47h35c.81,0,1.26-.78,1.36-1.5l3.73-22.19Zm1.78-5.77-1.6,3.57H111.1l-1.62-3.57H89.83a1.17,1.17,0,0,1-1.17-1.18v-2.8H71.92v2.81a1.18,1.18,0,0,1-1.18,1.17ZM25.18,62.65H58.7v6H25.18v42H58.37v6H19.18V37.71h6V62.65ZM0,9.75,2.88,32a1.5,1.5,0,0,0,1.36,1.47h35c.81,0,1.26-.78,1.36-1.5L44.36,9.75Z"/></svg></a>
			<a href="/aux/categories" aria-label="Categories"><svg version="1.1" id="catIcon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height=32 width=32 x="0px" y="0px" viewBox="0 0 102.78 123.1" style="enable-background:new 0 0 102.78 123.1" xml:space="preserve"><style type="text/css">.st0{fill-rule:evenodd;clip-rule:evenodd;stroke:#000000;stroke-width:0.216;stroke-miterlimit:2.6131;}</style><g><path class="st0" d="M53.79,29.73c1.54,0,2.78,1.25,2.78,2.78s-1.25,2.78-2.78,2.78S51,34.05,51,32.52S52.25,29.73,53.79,29.73 L53.79,29.73z M58.1,118.65l0.06,0h0.31c0.48-0.01,0.57-0.06,0.94-0.3l0.36-0.23c4.77-3.01,7.04-7.46,7.57-12.92 c0.56-5.8-0.8-12.77-3.26-20.4l0,0c-0.01-0.03-0.02-0.06-0.03-0.09L57.9,62.32c-0.6,0.26-1.19,0.51-1.79,0.75 c-2.35,0.98-4.77,1.71-7.24,2.22c-2.66,0.57-5.33,0.88-8.01,0.93c-5.72,0.09-11.44-1.04-17.17-3.4l-3.65,14.36 c-0.7,2.74-1.28,5.17-1.76,7.36c-0.51,2.32-0.97,4.58-1.39,6.88c-0.21,1.13-0.33,1.75-0.45,2.38c-1.33,6.85-2.74,14.15,1.09,19.9 c1.09,1.64,2.5,2.85,4.2,3.66c1.74,0.82,3.8,1.25,6.16,1.31c0.05,0,0.09,0,0.14,0h2.79V95.37c0-1.18,0.96-2.14,2.14-2.14 c1.18,0,2.14,0.96,2.14,2.14v23.28h11.49V95.37c0-1.18,0.96-2.14,2.14-2.14c1.18,0,2.14,0.96,2.14,2.14v23.28H58.1L58.1,118.65z M14.21,1.45l8.09,7.7c6-2.42,12.05-3.72,18.15-3.78c6.12-0.05,12.26,1.16,18.43,3.77l9.05-8.46c0.86-0.8,2.2-0.76,3,0.1 c0.38,0.41,0.57,0.93,0.57,1.44h0l0.11,18.06c2.46,4.3,3.92,8.31,4.53,12.07l3.63-1.18c1.12-0.36,2.32,0.25,2.69,1.37 c0.36,1.12-0.25,2.32-1.37,2.69l-4.61,1.5c0,0.1,0,0.2-0.01,0.29c-0.08,3.19-0.8,6.16-2.04,8.95l2.92,0.39 c1.17,0.15,1.99,1.22,1.84,2.39c-0.15,1.17-1.22,1.99-2.39,1.84l-4.59-0.61c-0.29,0.44-0.6,0.87-0.92,1.3 c-2.73,3.67-5.99,6.62-9.57,8.89l6.42,23.33h0c2.62,8.14,4.06,15.66,3.44,22.1c-0.49,5.13-2.25,9.56-5.69,13.05h10.46h0.11v0.01 c6.98,0,12.4,0,17.7-5.14c3.08-2.98,4.37-6.8,4.26-10.6c-0.06-2.08-0.55-4.17-1.39-6.13c-0.85-1.97-2.05-3.79-3.54-5.33 c-2.92-3.01-6.97-4.97-11.68-4.83c-1.17,0.03-2.15-0.89-2.19-2.07c-0.03-1.17,0.89-2.15,2.07-2.19c6-0.18,11.15,2.29,14.85,6.11 c1.87,1.93,3.36,4.19,4.4,6.62c1.04,2.43,1.65,5.06,1.72,7.7c0.15,4.93-1.53,9.88-5.54,13.77c-6.55,6.34-12.71,6.34-20.67,6.34 v0.01h-0.11H58.56l-0.2,0h-9.12c-0.17,0.04-0.35,0.07-0.53,0.07c-0.18,0-0.36-0.02-0.53-0.07h-14.7c-0.17,0.04-0.35,0.07-0.53,0.07 c-0.18,0-0.36-0.02-0.53-0.07h-4.4c-0.08,0-0.15,0-0.23-0.01c-2.97-0.07-5.61-0.63-7.89-1.71c-2.41-1.14-4.4-2.85-5.94-5.16 c-4.79-7.2-3.21-15.37-1.72-23.05c0.19-0.96,0.37-1.91,0.45-2.34c0.42-2.3,0.89-4.61,1.43-7.03c0.56-2.54,1.15-5.01,1.78-7.49 l3.91-15.37c-4.32-2.53-7.98-5.91-10.53-10.02C9.14,50.51,9,50.28,8.87,50.06l-3.45,0.43c-1.17,0.14-2.23-0.69-2.38-1.86 c-0.14-1.17,0.69-2.23,1.86-2.38l2.05-0.25c-1.08-2.92-1.64-6.11-1.59-9.53l-3.78-1.23c-1.12-0.36-1.73-1.57-1.37-2.69 c0.36-1.12,1.57-1.73,2.69-1.37l2.85,0.93c0.6-3.71,1.9-7.65,4.02-11.8l0.84-17.41c0.06-1.17,1.05-2.08,2.23-2.03 C13.38,0.89,13.85,1.11,14.21,1.45L14.21,1.45L14.21,1.45z M20.37,13.2l-5.73-5.45l-0.64,13.21l0,0c-0.01,0.3-0.09,0.6-0.24,0.88 c-2.16,4.13-3.41,8.01-3.89,11.6l13.38,4.34c1.12,0.36,1.73,1.57,1.37,2.69c-0.36,1.12-1.57,1.73-2.69,1.37L9.66,37.85 c0.11,2.74,0.7,5.28,1.67,7.59l11.01-1.37c1.17-0.14,2.23,0.69,2.38,1.86c0.14,1.17-0.69,2.24-1.86,2.38l-9.3,1.16 c2.23,3.2,5.31,5.85,8.89,7.87c4.01,2.26,8.65,3.72,13.5,4.28c4.29,0.5,8.72,0.28,12.99-0.71c1.64-0.4,3.28-0.91,4.92-1.53 c5.15-2.03,9.86-5.33,13.55-10.06l-7.62-1.02c-1.17-0.15-1.99-1.22-1.84-2.39c0.15-1.17,1.22-1.99,2.39-1.84l9.64,1.29 c1.18-2.28,1.93-4.68,2.16-7.24l-11.42,3.7c-1.12,0.36-2.32-0.25-2.69-1.37c-0.36-1.12,0.25-2.32,1.37-2.69l12.63-4.1 c-0.47-3.57-1.88-7.47-4.38-11.75h0c-0.18-0.31-0.29-0.68-0.29-1.07L67.28,7.11l-6.43,6.02c-0.61,0.64-1.58,0.85-2.43,0.47 c-6.02-2.74-12-4.01-17.94-3.96c-5.94,0.05-11.87,1.43-17.8,3.98l0,0C21.92,13.94,21.01,13.8,20.37,13.2L20.37,13.2z M37.54,39.46 c-1.18,0-2.14-0.96-2.14-2.14s0.96-2.14,2.14-2.14h6.61c1.18,0,2.14,0.96,2.14,2.14s-0.96,2.14-2.14,2.14h-1.2 c0.08,1.25,0.3,2.35,0.63,3.28c0.49,1.4,1.23,2.42,2.12,3.07c0.87,0.64,1.91,0.97,3.03,0.99c0.86,0.02,1.77-0.14,2.71-0.47 c1.11-0.39,2.33,0.19,2.72,1.3c0.39,1.11-0.19,2.33-1.3,2.72c-1.41,0.5-2.83,0.74-4.22,0.71c-2-0.04-3.87-0.63-5.46-1.81 c-0.79-0.59-1.51-1.31-2.13-2.17c-0.55,0.89-1.2,1.59-1.95,2.15c-2.49,1.85-5.65,1.86-9.07,1.38c-1.17-0.16-1.98-1.24-1.82-2.4 c0.16-1.17,1.24-1.98,2.4-1.82c2.44,0.34,4.61,0.41,5.93-0.58c1.2-0.9,1.98-2.8,2.09-6.35H37.54L37.54,39.46z M28.12,29.73 c1.54,0,2.78,1.25,2.78,2.78s-1.25,2.78-2.78,2.78c-1.54,0-2.78-1.25-2.78-2.78S26.58,29.73,28.12,29.73L28.12,29.73z"/></g></svg></a>
			<a href="/aux/privacy-policy" aria-label="Privacy Policy"><svg xmlns="http://www.w3.org/2000/svg" height=32 width=32 shape-rendering="geometricPrecision" text-rendering="geometricPrecision" image-rendering="optimizeQuality" fill-rule="evenodd" clip-rule="evenodd" viewBox="0 0 511 512.35"><path d="M162.62 21.9c-5.49 5.43-10.63 12.02-15.42 19.71-17.37 27.82-30.33 69.99-39.92 123.16-56.3 10.64-91.06 34.14-89.9 58.14 1.04 21.74 28.46 38.41 69.67 49.92-2.71 8.38-2.07 9.82 1.6 20.13-30.78 12.98-62.94 52.4-88.65 86.93l100.03 67.61-35.32 64.85h384.41l-37.26-64.85L511 378.63c-29.08-40.85-64.19-75.56-86.12-84.98 4.63-12.02 5.44-14.12 1.56-20.79 41.21-11.72 68.23-28.84 68.17-51.47-.06-24.68-35.5-48.38-88.31-56.62-12.64-53.5-25.22-95.62-41.23-123.27-2.91-5.02-5.93-9.57-9.09-13.62-47.66-61.12-64.36-2.69-98.14-2.76-39.17-.08-44.15-53.69-95.22-3.22zm67.12 398.37c-3.57 0-6.47-2.9-6.47-6.47s2.9-6.47 6.47-6.47h10.52c1.38 0 2.66.44 3.7 1.17 3.77 2.1 7.46 3.33 11.01 3.42 3.54.09 7.14-.96 10.8-3.45a6.515 6.515 0 0 1 3.61-1.11l12.78-.03c3.57 0 6.46 2.9 6.46 6.47s-2.89 6.47-6.46 6.47h-10.95c-5.46 3.27-10.98 4.67-16.54 4.53-5.44-.14-10.78-1.77-16.01-4.53h-8.92zm-69.12-140.78c60.43 21.74 120.87 21.38 181.3 1.83-58.45 4.75-122.79 3.62-181.3-1.83zm208.37-.86c20.89 70.63-68.53 106.5-101.95 27.98h-22.11c-34.12 78.28-122.14 44.17-102.16-28.94-7.31-.8-14.51-1.68-21.56-2.62l-.32 1.88-.59 3.56-3.48 20.87c-30.39-6.72-13.36 71.77 14.26 64.87 4.22 12.18 7.69 22.62 11.26 32.19 36.81 98.83 190.88 104.81 226.95 6.36 3.78-10.32 6.85-21.64 11.24-35.39 25.44 4.06 46.35-73.31 15.34-67.63l-3.19-21.05-.55-3.65-.23-1.54c-7.47 1.16-15.12 2.2-22.91 3.11zM123.7 176.34l7.43-25.43c48.16 40.42 214.59 34.09 250.87 0l6.26 25.43c-42.31 44.75-219.33 38.67-264.56 0z"/></svg></a>
			<a href="/feed.xml" aria-label="RSS Feed"><svg xmlns="http://www.w3.org/2000/svg" height="32" viewBox="0 -960 960 960" width="32" style="background-color:orange; fill:white"><path d="M200-120q-33 0-56.5-23.5T120-200q0-33 23.5-56.5T200-280q33 0 56.5 23.5T280-200q0 33-23.5 56.5T200-120Zm480 0q0-117-44-218.5T516-516q-76-76-177.5-120T120-680v-120q142 0 265 53t216 146q93 93 146 216t53 265H680Zm-240 0q0-67-25-124.5T346-346q-44-44-101.5-69T120-440v-120q92 0 171.5 34.5T431-431q60 60 94.5 139.5T560-120H440Z"/></svg></a>
		</div>
		</nav>
	</header>

	<main>
<div id="search"></div>



	<article>
	<p class=dimmedColor><time datetime="2022-02-25 19:00:00">25th February 2022</time>, 27 min read</p>
<h1>Ein Static Site Generator in PHP, schneller als Hugo oder Zola</h1>
<p>Original post is here <a href="https://eklausmeier.goip.de/blog/2022/02-25-ein-static-site-generator-in-php-schneller-als-hugo-oder-zola">eklausmeier.goip.de/blog/2022/02-25-ein-static-site-generator-in-php-schneller-als-hugo-oder-zola</a>.</p>
<br>
<p><em>Dieser Artikel ist gedacht für eine Veröffentlichung im PHP-Magazin, Redaktionsleiter Hartmut Schlosser.</em></p>
<p>Zusammenfassung: Wir stellen Techniken wie PHP-FFI, PHP-PECL und Profiling mit XHProf vor. Mit diesen Techniken wird ein in PHP geschriebener Static Site Generator performanter, wie die beiden bekannten Generatoren Hugo und Zola, die in Go oder Rust geschrieben wurden.</p>
<p>Kann PHP gegen in Go oder in Rust erstellte CMS antreten und trotzdem performanter sein? Wenn ja, was sind die wesentlichen Elemente für die Performance? Sind diese Elemente auch auf andere PHP-Projekte übertragbar, also Projekte, die gar nichts mit CMS zu tun haben? Wie kann man die performance-kritischen Stellen in einem PHP Programm erkennen? Was kann man mit diesen Ergebnissen dann anstellen? Dieser Artikel beantwortet diese Fragen.</p>
<p>Von Elmar Klausmeier</p>
<h2>Was ist ein Static Site Generator?</h2>
<p>Bekannte datenbank-gestützte Content Management Systeme (CMS), wie WordPress oder Joomla, erzeugen aus den Daten in einer Datenbank während einer Web-Anfrage mit Hilfe von PHP entsprechenden HTML Code, der an den Nutzer ausgeliefert wird. D.h. pro Request finden Datenbankoperationen statt und es wird PHP Code ausgeführt. Zusätzlich ausgelieferten JavaScript Code lassen wir hierbei noch außer acht. Flat File CMS ersetzen hierbei die Datenbank durch reine Dateioperationen.</p>
<p>Static Site Generatoren gehen hierbei einen grundsätzlich anderen Weg. Anstatt pro Anfrage eines Nutzers die HTML-Seite dynamisch zusammen zu setzen, werden sämtliche HTML-Seiten vorab generiert. Kommt nun eine Anfrage eines Nutzers, so liegt die HTML-Seite bereits komplett fertig vor und muß vom Web-Server nur noch ausgeliefert werden. D.h. auf der Web-Server Seite ist nur ein klassischer Web-Server, wie z.B. nginx oder Apache, nötig, aber keine dynamische Komponenten wie PHP, JSP, ASP u.s.w. Aus Performance- und Sicherheitsgründen ist damit ein Static Site Generator sehr attraktiv.</p>
<p>Kein Licht ohne Schatten. Nachteilig beim Static Site Generator sind, daß zum einen ein separater Deployment-Schritt der generierten Seiten auf den Web-Server notwendig ist und zum anderen, daß die Erzeugung der ganzen statischen HTML-Seiten einmalige Generierzeit benötigt.</p>
<p>Ein Static Site Generator benötigt den eigentlichen Content und ein oder mehrere Templates (Schablonen) aus denen dann die statischen HTML-Seiten erzeugt werden.</p>
<div class=mermaid>
flowchart LR
    A[Templates] & B[Markdown Content] --> C[Static HTML]
</div>
<p>Das Template definiert üblicherweise den Kopf und Fuß, sowie die Navigationsleisten der Web-Site. Der Content ist häufig in <a href="https://daringfireball.net/projects/markdown">Markdown</a> /1/ oder <a href="https://de.wikipedia.org/wiki/ReStructuredText">reStructuredText</a> /2/ verfaßt, kann aber auch eine eigene spezielle Sprache sein.</p>
<p>In den letzten Jahren sind eine ganze Reihe von Static Site Generatoren entstanden. An Programmiersprachen zur Erstellung von Static Site Generatoren findet man öfters: Go, Rust, Ruby, JavaScript, Python und PHP. Nachfolgende Tabelle enthält eine Auswahl von Static Site Generatoren.</p>
<table>
<thead>
<tr>
<th>Generator</th>
<th>Programmiersprache</th>
</tr>
</thead>
<tbody>
<tr>
<td>Hugo</td>
<td>Go</td>
</tr>
<tr>
<td>Zola</td>
<td>Rust</td>
</tr>
<tr>
<td>Eleventy</td>
<td>JavaScript</td>
</tr>
<tr>
<td>GitBook</td>
<td>JavaScript</td>
</tr>
<tr>
<td>Pelican</td>
<td>Python</td>
</tr>
<tr>
<td>Jekyll</td>
<td>Ruby</td>
</tr>
<tr>
<td>Grav</td>
<td>PHP</td>
</tr>
<tr>
<td>Saaze</td>
<td>PHP</td>
</tr>
<tr>
<td>Nift</td>
<td>C++</td>
</tr>
</tbody>
</table>
<p>Auf <a href="https://jamstack.org/generators">Site Generators</a> /3/ findet man mehr als 300 Static Site Generatoren. Und diese genannte Liste ist nicht vollständig.</p>
<p>Man würde annehmen, daß die Generierzeit zur Erzeugung aller statischen Seiten bei einem Static Site Generator geringer ist, wenn eine compilierte Sprache, wie Go oder Rust, benutzt wird. Wir werden im weiteren sehen, daß die geschickte Kombination von PHP-FFI und PHP-PECL den bekannten compilierten Sprachen nicht nur Paroli bieten können, sondern sie sogar schlagen können.</p>
<h2>Warum Ablösung von WordPress durch einen Static Site Generator?</h2>
<p>Der Autor hat über knapp zehn Jahre in WordPress einen kleinen Blog über Computer geführt. Von solchen Computer-Blogs gibt es Tausende. Ähnlich wie Reise-Blogs, Koch-Blogs, SEO-Blogs u.s.w. Wenn man über diese zehn Jahre so ca. 300 Artikel gesammelt hat, dann möchte man, daß diese Seiten auch bestehen bleiben und nicht durch Änderungen auf Seiten von WordPress auf einmal &quot;kaputt&quot; gehen, also man den Inhalt eines oder mehrerer Artikel nochmal erfassen muß. Mit der Einführung des sogenannten Gutenberg-Editors in WordPress geschah aber nun genau das. Bestehender Content wurde, wenn man ihn anfaßte, völlig zerstört. Auch das Einfügen von mathematischen Formeln ist in WordPress etwas umständlich. Ferner kann WordPress nur i.w. ein einziges Blog führen, nicht mehrere parallel unter einer URL. Das war der Punkt, wo Ersatz her mußte. Im Vorfeld hatte ich mich öfters mit Hugo beschäftigt und sogar dafür einen <a href="https://eklausmeier.goip.de/blog/2017/04-24-converting-wordpress-export-file-to-hugo">Converter</a> /4/ in Go geschrieben, der WordPress Daten in Hugo-Dateien umwandeln kann. Im Rahmen dieser Converter-Erstellung hatte ich aber bemerkt, daß die Entwickler von Hugo etwas <a href="https://eklausmeier.goip.de/blog/2017/06-19-contributing-to-hugo-static">reserviert bis abweisend</a> /5/ auf Änderungswünsche reagierten.</p>
<p>Ich suchte nun einen Static Site Generator, der einfach zu bedienen ist, denn ich wollte nun zügig von WordPress umsteigen. Ich wollte ja bloggen und mich nicht mit Static Site Generatoren als solchem auseinander setzen. Ich schaute mir Stati, Pico und schließlich Saaze an.</p>
<h2>Saaze Static Site Generator</h2>
<p><a href="https://saaze.dev">Saaze</a> /6/ wurden durch den schottischen Designer und Entwickler <a href="https://gilbitron.me">Gilbert Pellegrom</a> /7/ erstellt. Dieser hatte bereits diverse andere CMS implementiert, wie PicoCMS, Baun, Handle und Circulate. Leider wird keines der von ihm entwickelten CMS von ihm selber weiter entwickelt. Zum Thema Abandonware komme ich nachher nochmal.</p>
<p>Saaze besticht durch folgende Eigenschaften:</p>
<ol>
<li>Einfach in der Benutzung und Installation</li>
<li>Einfach zu hosten -- das ist bei statischen Seiten generell kein großes Problem</li>
<li>Saaze kann sowohl als Static Site Generator benutzt werden, aber auch dynamisch Content erzeugen, d.h. wie ein klassisches Flat File CMS arbeiten</li>
<li>Leichte Erweiterbarkeit</li>
</ol>
<p>Die leichte Erweiterbarkeit von Saaze war wichtig, weil ich mathematische Formeln, YouTube Videos oder Twitter Tweets einfach einbetten wollte. Von Haus aus bot Saaze das nicht, aber es war unkompliziert diese Funktionalität zu ergänzen. Die Reise startete also mit Saaze.</p>
<p>Der Content von Saaze wird in Markdown vorgehalten. Jede Markdown Datei enthält im Kopf sogenannten Frontmatter in Yaml. Das sind Informationen zu Titel, Datum, Entwurf (&quot;Draft&quot;), ggf. verwendete Bibliotheken u.s.w. Eine solche Markdown-Datei mit Frontmatter sieht beispielsweise wie folgt aus:</p>
<pre class="line-numbers"><code class="language-yaml">---
date: &quot;2021-05-18 13:00:00&quot;
title: &quot;Moved Blog To eklausmeier.goip.de&quot;
draft: false
categories: [&quot;WordPress&quot;]
tags: [&quot;Saaze&quot;, &quot;PHP&quot;, &quot;Go&quot;]
author: &quot;Elmar Klausmeier&quot;
---

The blog [eklausmeier.wordpress.com](https://eklausmeier.wordpress.com) is no longer maintained. I moved to [eklausmeier.goip.de](https://eklausmeier.goip.de), i.e., this one. During migration I corrected a couple of minor typos and dead links.
...
</code></pre>
<p>Saaze verwendet Blade als Template Engine.</p>
<p>Wie oben bereits erwähnt, so gibt es zwei Nachteile von Static Site Generatoren: Deployment und Generierzeit. Bei mir ist das Deployment ein kurzes Shell-Script, welches letztlich nur Directories umbenennt. Das ist bei einem kleinen privaten Blog keine große Sache. Die Generierzeit ist allerdings ein Thema, wenn man schnell nochmal alles neu generieren muß, weil man feststellt, daß man doch noch was ändern will. Sei nun die Änderung am Template oder am Content ist egal -- es muß neu generiert werden.</p>
<h2>Saaze schneller machen</h2>
<p>Mir war bei der Installation von Saaze mit Hilfe von Composer aufgefallen, daß Saaze eine Reihe von störenden Abhängigkeiten zu anderen PHP Bibliotheken hat. Störend deswegen, weil die Installation von Saaze mit PHP8 ohne Klimmzüge nicht vonstatten ging. Vielmehr mußte Composer über PHP7 aufgerufen werden, damit alle Abhängigkeiten befriedigt werden konnten. Zuerst habe ich das dem Umstand zugeschrieben, daß PHP8 noch neu ist. Wenn nun alle Abhängigkeiten installiert sind, dann kann man Saaze auch mit PHP8 aufrufen. Wenn man sich die Abhängigkeit dann im Source Code von Saaze anschaut, dann sieht man allerdings, daß diese Abhängigkeiten eigentlich nur Trivialitäten erledigen. Ich notierte mir als Merkposten, daß ich dort mal aufräumen sollte, wenn mal Zeit wäre. Später stellte sich heraus, daß diese Abhängigkeiten ein Grund für die vergleichsweise langen Generierzeiten sind. Dazu aber später mehr.</p>
<p>Der Weg war aber nun vorgezeichnet:</p>
<ol>
<li>Einsatz von FFI, um die Konvertierung von Markdown zu HTML zu beschleunigen</li>
<li>Profiling der Anwendung, um Schwachstellen zu erkennen</li>
<li>Reduktion der Abhängigkeiten</li>
</ol>
<p>Der Fahrplan ist nun:</p>
<div class=mermaid>
flowchart LR
    A[FFI] --> B[Profiling] --> C[Dependency reduction]
</div>
<p>Man erkennt, daß FFI schon vor dem eigentlichen Profiling verwendet wurde. Es ist bei einem Markdown-basierten Static Site Generator offenkundig, daß die Umwandlung von Markdown zu HTML einen wesentlichen Einfluß auf die Laufzeit hat. Wenn man von seiner Anwendung keine offenkundigen Performance-kritischen Stellen vorab kennt, muß man natürlich mit Profiling anfangen.</p>
<h2>Simplified Saaze</h2>
<p>Die beschleunigte Version von Saaze nenne ich im weiteren <a href="https://eklausmeier.goip.de/blog/2021/10-31-simplified-saaze/">&quot;Simplified Saaze&quot;</a> /8/. Der Name kommt daher, daß der Code für Simplified Saaze kleiner ist als für Saaze. Trotz des geringeren Codeumfangs bietet Simplified jedoch folgende Funktionen, die Saaze nicht anbietet:</p>
<ol>
<li>Mathematische Formeln mit <a href="https://www.mathjax.org">MathJax</a> /9/</li>
<li>Einbettung von Twitter, sowie YouTube, Vimeo und WordPress Videos</li>
<li>Einbettung von <a href="https://mermaid-js.github.io/mermaid">Mermaid</a> /10/</li>
<li>Einbettung von <a href="https://codepen.io">CodePen</a> /11/</li>
<li>Entwurfsmodus</li>
<li>Einzelgenerierung von Markdown Dateien</li>
<li>Native PHP als Template Engine</li>
</ol>
<h2>FFI</h2>
<p>Seit PHP 7.4 bietet PHP die Möglichkeit <em>sehr einfach</em> C Routinen von PHP aus aufzurufen. Die Betonung liegt hier auf der Einfachheit. FFI steht für Foreign Function Interface. FFI wurde von <a href="https://www.zend.com/blog/php-foreign-function-interface-ffi">Dmity Stogov</a> /12/ der Firma Zend implementiert. Es orientiert sich an <a href="https://luajit.org">LuaJIT</a> /13/ FFI von <a href="https://luajit.org/contact.html">Michael Pall</a> /14/. PHP ist in C geschrieben und PHP um C Funktionen zu erweitern war nie wirklich schwierig, jedoch etwas mühsam, weil man den kompletten PHP Source Code zuerst runterladen und übersetzen muß, um dann für diese Version die richtige Erweiterung zu implementieren. FFI umgeht dies. Es reicht vollkommen aus, wenn man mit Hilfe von <code>FFF::cdef</code> die Signatur der C Routine angibt, d.h. Name der Routine plus Return-Type und Argument-Typen. Zusätzlich gibt man den Ort der shared library an, wo sich diese Routine befindet. Hat man das gemacht, so kann man diese C Routine direkt mittels <code>FFI::string()</code> aufrufen, wenn beispielsweise die C-Routine einen <code>char *</code> zurück liefert. Wenn der Return-Type der C-Routine nur <code>int</code> oder <code>double</code> ist, dann kann der Aufruf sogar direkt erfolgen, siehe nachfolgendes Beispiel:</p>
<pre class="line-numbers"><code class="language-PHP">$ffj0 = FFI::cdef(&quot;double j0(double);&quot;, &quot;libm.so.6&quot;);
printf(&quot;j0(2) = %f&lt;br&gt;\n&quot;, $ffj0-&gt;j0(2));
</code></pre>
<p>Einfacher kann der Aufruf von C Routinen nicht mehr werden.</p>
<p>Damit man FFI in PHP benutzen kann, muß man in der <code>php.ini</code> folgendes setzen:</p>
<pre class="line-numbers"><code class="language-ini">extension=ffi
ffi.enable=true
</code></pre>
<p>Diese Schalterstellung prüft man am besten mit <code>phpinfo()</code>. Das sollte dann wie folgt aussehen:
<img src="/img/FFI_Extension_phpinfo.png" alt=""></p>
<p>Mit der leichten Aufrufbarkeit von C hat man damit natürlich auch C++, Julia und Go.</p>
<p>Die <a href="https://www.php.net/manual/en/intro.ffi.php">PHP Dokumentation</a> /15/ schreibt zu FFI:</p>
<blockquote>
<p>Currently, accessing FFI data structures is significantly (about 2 times) slower than accessing native PHP arrays and objects. Therefore, it makes no sense to use the FFI extension for speed; however, it may make sense to use it to reduce memory consumption.</p>
</blockquote>
<p>Dies ist m.E. irreführend, weil einer der Gründe für den Aufruf von C Routinen ist selbstverständlich Geschwindigkeit. In unserem Falle werden wir sehen, daß der Aufruf von MD4C zu einer Halbierung der Laufzeit von Saaze führt. Merken sollte man sich allerdings, daß die Geschwindigkeit nicht ganz dieselbe ist wie bei einer PHP Extension, weil die Verkapselung der PHP Daten für die Weiterverarbeitung in C etwas Zeit kostet.</p>
<p>Seine C Routine compiliert man wie folgt:</p>
<pre class="line-numbers"><code class="language-bash">cc -fPIC -Wall -O2 -shared ...
</code></pre>
<p>Grund für die Kommandozeilenoptionen <code>-fPIC</code> und <code>-shared</code>: Die C Routine soll in einer shared library liegen.</p>
<p>Es soll nicht verschwiegen werden, daß derzeit FFI einen Nachteil gegenüber in PHP implementierten Routinen hat: Die Integration in Composer ist noch nicht direkt vorhanden. D.h. wenn die eigene Software C Routinen via FFI einbettet, dann ist diese C Routine bei der Installation via Composer in gewisser Hinsicht ein Fremdkörper, der separate Installationsschritte bedarf. Wie man oben sieht ist es nicht schwierig oder kompliziert, aber halt nicht direkt in Composer integriert.</p>
<h2>FFI im Vergleich zu PHP Extensions</h2>
<p>Einer der wesentlichen Vorteile von FFI ist die sehr einfache Aufrufbarkeit von C Routinen aus PHP heraus. Nachfolgend kurz die Darstellung, wie man eine PHP Extension erstellt.</p>
<ol>
<li>Man lädt sich den Source Code von PHP herunter.</li>
<li>Man lädt sich die Abhängigkeiten herunter, die benötigt werden. In meinem Falle von Arch Linux war dies <code>pacman -S tidy freetds</code>.</li>
<li>Man rekonstruiert die configure Parameter: <code>php -i | grep &quot;Configure Command&quot;</code>. Die Ausgabe ist ein mehrzeilger Befehl für <code>configure</code>.</li>
<li>Man ruft <code>make</code>.</li>
</ol>
<p>Eine einfache Extension sieht dann bspw. so aus:</p>
<pre class="line-numbers"><code class="language-C">/* {{{ void test1() */
PHP_FUNCTION(test1)
{
    ZEND_PARSE_PARAMETERS_NONE();

    php_printf(&quot;test1(): The extension %s is loaded and working!\r\n&quot;, &quot;callcob&quot;);
    cob_init(0,NULL);
}
/* }}} */
</code></pre>
<p>Man sieht, daß das ganze wesentlich zäher ist als der FFI Aufruf. Ein weiterer Nachteil ist, daß bei einer neuen PHP Version, bspw. ein Wechsel von PHP 8.0 auf 8.1, man diese Prozedur wiederholen muß.</p>
<p>Eine gute Einführung in die Programmierung von PHP Extensions findet man in <a href="https://www.amazon.de/-/en/Sara-Golemon/dp/067232704X" title="Sara Golemon: Extending and Embedding PHP, Sams Publishing, 2006">Golemon</a> /16/ und in <a href="https://www.zend.com/sites/zend/files/pdfs/whitepaper-zend-php-extensions.pdf">Zend</a> /17/.</p>
<h2>Aufruf von MD4C via FFI</h2>
<p>Zurück zu Saaze und der Verkürzung der Generierzeit. Einer der wesentlichen Aufgaben eines Static Site Generators ist die Umwandlung von Markdown in HTML. Wie oben beschrieben, manche Static Site Generatoren akzeptieren und fordern andere Eingabeformat als Markdown, wie z.B. reStructuredText. Saaze benötigt Markdown. Die Umwandlung von Markdown zu HTML geschieht in Saaze mittels <a href="https://github.com/erusev/parsedown-extra">Parsedown Extra</a> /18/, welches i.w. von <a href="https://erusev.com">Emanuil Rusev</a> /19/ programmiert wurde. Ersetzt man Parsedown Exrtra durch <a href="https://github.com/mity/md4c">MD4C</a> /20/ zeigt sich, daß man die Umwandlungszeit von Markdown zu HTML um den Faktor acht senken kann. In der Summe kommt man auf Reduktion der Laufzeit um fast die Hälfte.</p>
<p>MD4C ist eine in C geschriebene Routine für die Umwandlung von Markdown zu HTML. Programmiert wurde sie von <a href="https://github.com/mity">Martin Mitas</a> /21/. Um sich einen groben Überblick zu verschaffen, um wieviel schneller MD4C gegenüber anderen Implementierung ist, nachfolgend zwei Tabellen. Man siehe <a href="https://talk.commonmark.org/t/why-is-md4c-so-fast-c/2520/12">Why is MD4C so fast?</a> /22/:</p>
<table>
<thead>
<tr>
<th>Test name</th>
<th>Simple input</th>
<th>MD4C (seconds)</th>
<th>Cmark (seconds)</th>
</tr>
</thead>
<tbody>
<tr>
<td>cmark-benchinput.md</td>
<td>(benchmark from CMark)</td>
<td>0.3650</td>
<td>0.7060</td>
</tr>
<tr>
<td>long-block-multiline.md</td>
<td>&quot;foo\n&quot; * 1000000</td>
<td>0.0400</td>
<td>0.2300</td>
</tr>
<tr>
<td>long-block-oneline.md</td>
<td>&quot;foo &quot; * 10 * 1000000</td>
<td>0.0700</td>
<td>0.1000</td>
</tr>
<tr>
<td>many-atx-headers.md</td>
<td>&quot;###### foo\n&quot; * 1000000</td>
<td>0.0900</td>
<td>0.4670</td>
</tr>
<tr>
<td>many-blanks.md</td>
<td>&quot;\n&quot; * 10 * 1000000</td>
<td>0.0700</td>
<td>0.3110</td>
</tr>
<tr>
<td>many-emphasis.md</td>
<td>&quot;<em>foo</em> &quot; * 1000000</td>
<td>0.1100</td>
<td>0.8460</td>
</tr>
<tr>
<td>many-fenced-code-blocks.md</td>
<td>&quot;~~~\nfoo\n~~~\n\n&quot; * 1000000</td>
<td>0.1600</td>
<td>0.4010</td>
</tr>
<tr>
<td>many-links.md</td>
<td>&quot;<code>[a](/url)</code>&quot; * 1000000</td>
<td>0.2100</td>
<td>0.5110</td>
</tr>
<tr>
<td>many-paragraphs.md</td>
<td>&quot;foo\n\n&quot; * 1000000</td>
<td>0.0900</td>
<td>0.4860</td>
</tr>
</tbody>
</table>
<p>Ein weiterer <a href="https://github.com/commonmark/cmark/blob/master/benchmarks.md">Geschwindigkeitsvergleich</a> /23/ zwischen cmark, md4c und commonmark.js:</p>
<table>
<thead>
<tr>
<th>Implementation</th>
<th align="right">Time (sec)</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>commonmark.js</strong></td>
<td align="right">0.59</td>
</tr>
<tr>
<td><strong>cmark</strong></td>
<td align="right">0.12</td>
</tr>
<tr>
<td><strong>md4c</strong></td>
<td align="right">0.04</td>
</tr>
</tbody>
</table>
<p>MD4C wurde speziell im Hinblick auf Performance und geringen Speicherverbrauch hin entwickelt.</p>
<p>Während Parsedown direkt in PHP implementiert ist und sich damit mittels Composer einfach als Abhängigkeit hinzufügen läßt, so ist bisher kein MD4C Paket in PHP bekannt. Hier hilft nun FFI. Es ist eben sehr einfach MD4C, welches in C geschrieben ist, in PHP via FFI aufzurufen.</p>
<p>Der Aufruf von MD4C aus PHP heraus sieht nun wie folgt aus:</p>
<pre class="line-numbers"><code class="language-PHP">&lt;?php
    $ffi = FFI::cdef(&quot;char *md4c_toHtml(const char*);&quot;,&quot;/srv/http/php_md4c_toHtml.so&quot;);
    printf(&quot;argv1 = %s\n&quot;, $argv[1]);
    $markdown = file_get_contents($argv[1]);
    $html = FFI::string( $ffi-&gt;md4c_toHtml($markdown) );
    printf(&quot;%s&quot;, $html);
</code></pre>
<p>Die eigentliche C Routine <code>md4c_toHtml()</code> für den MD4C Aufruf ist:</p>
<pre class="line-numbers"><code class="language-C">/* Provide md4c to PHP via FFI
   Copied many portions from Martin Mitas:
       https://github.com/mity/md4c/blob/master/md2html/md2html.c

   Compile like this:
       cc -fPIC -Wall -O2 -shared php_md4c_toHtml.c -o php_md4c_toHtml.so -lmd4c-html

   This routine is not thread-safe. For threading we either need a thread-id passed
   or using a mutex to guard the static/global mbuf.
*/

#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;
#include &lt;md4c-html.h&gt;


struct membuffer {
    char* data;
    size_t asize;
    size_t size;
};


static void membuf_init(struct membuffer* buf, MD_SIZE new_asize) {
    buf-&gt;size = 0;
    buf-&gt;asize = new_asize;
    if ((buf-&gt;data = malloc(buf-&gt;asize)) == NULL) {
        fprintf(stderr, &quot;membuf_init: malloc() failed.\n&quot;);
        exit(1);
    }
}


static void membuf_grow(struct membuffer* buf, size_t new_asize) {
    buf-&gt;data = realloc(buf-&gt;data, new_asize);
    if(buf-&gt;data == NULL) {
        fprintf(stderr, &quot;membuf_grow: realloc() failed.\n&quot;);
        exit(1);
    }
    buf-&gt;asize = new_asize;
}


static void membuf_append(struct membuffer* buf, const char* data, MD_SIZE size) {
    if(buf-&gt;asize &lt; buf-&gt;size + size)
        membuf_grow(buf, buf-&gt;size + buf-&gt;size / 2 + size);
    memcpy(buf-&gt;data + buf-&gt;size, data, size);
    buf-&gt;size += size;
}


static void process_output(const MD_CHAR* text, MD_SIZE size, void* userdata) {
    membuf_append((struct membuffer*) userdata, text, size);
}


static struct membuffer mbuf = { NULL, 0, 0 };


char *md4c_toHtml(const char *markdown) {	// return HTML string
    int ret;
    if (mbuf.asize == 0) membuf_init(&amp;mbuf,16777216);

    mbuf.size = 0;	// prepare for next call
    ret = md_html(markdown,strlen(markdown),process_output,&amp;mbuf,MD_DIALECT_GITHUB,0);
    membuf_append(&amp;mbuf,&quot;\0&quot;,1); // make it a null-terminated C string, so PHP can deduce length
    if (ret &lt; 0) return &quot;&lt;br&gt;- - - Error in Markdown - - -&lt;br&gt;\n&quot;;

    return mbuf.data;
}
</code></pre>
<p>Obiger Code wird in Simplified Saaze verwendet. Obiger Code ließe sich aber auch in Grav, PicoCMS, Sculpin, Stati oder Statamic einfach verwenden.</p>
<h2>Profiling mit XHProf</h2>
<p>Profiling ist das Messen, wie lange Funktionsaufrufe dauern und wie häufig Funktionen aufgerufen werden. Ein sehr leistungsstarkes Werkzeug für PHP ist hierbei <a href="https://pecl.php.net/package/xhprof">XHProf</a> /24/. Dieser &quot;Hierarchical Profiler&quot; genannte Profiler wurde ursprünglich von Facebook entwickelt. Vor der Benutzung der auf PHP basierten Programmiersprache <a href="https://en.wikipedia.org/wiki/Hack_(programming_language)">Hack</a> /25/ hat Facebook intensiv PHP benutzt.</p>
<p>Die Installation von XHProf nach Download ist wie folgt:</p>
<ol>
<li><code>cd extension</code></li>
<li><code>phpize</code></li>
<li><code>configure</code></li>
<li><code>make</code></li>
<li>Kopiere so Datei in das PHP Library Directory, unter Arch Linux ist dies <code>/usr/lib/php/modules/</code></li>
<li>Passe <code>php.ini</code> an</li>
<li>Kopiere JavaScript Libraries, z.B. nach <code>/usr/share/webapps/xhprof/</code></li>
</ol>
<p>Um nun die Messung zu starten muß XHProf explizit aufgerufen werden:</p>
<pre class="line-numbers"><code class="language-PHP">xhprof_enable(XHPROF_FLAGS_CPU + XHPROF_FLAGS_MEMORY);
</code></pre>
<p>Um die Messung zu stoppen:</p>
<pre class="line-numbers"><code class="language-PHP">stopXhprof();
</code></pre>
<p>Obige Hilfsfunktion ist wie folgt definiert:</p>
<pre class="line-numbers"><code class="language-PHP">function stopXhprof() {
    $xhprof_data = xhprof_disable();

    //
    // Saving the XHProf run
    // using the default implementation of iXHProfRuns.
    //
    include_once &quot;/usr/share/webapps/xhprof/xhprof_lib/utils/xhprof_lib.php&quot;;
    include_once &quot;/usr/share/webapps/xhprof/xhprof_lib/utils/xhprof_runs.php&quot;;

    $xhprof_runs = new \XHProfRuns_Default();

    // Save the run under a namespace &quot;xhprof_foo&quot;.
    //
    // **NOTE**:
    // By default save_run() will automatically generate a unique
    // run id for you. [You can override that behavior by passing
    // a run id (optional arg) to the save_run() method instead.]
    //
    $run_id = $xhprof_runs-&gt;save_run($xhprof_data, &quot;saaze&quot;);

    echo &quot;---------------\n&quot;.
        &quot;Assuming you have set up the http based UI for \n&quot;.
        &quot;XHProf at some address, you can view run at \n&quot;.
        &quot;http://&lt;xhprof-ui-address&gt;/index.php?run=$run_id&amp;source=saaze\n&quot;.
        &quot;---------------\n&quot;;
    }
</code></pre>
<p>Man beachte, daß durch die Messung via XHProf die Ablaufgeschwindigkeit insgesamt langsamer wird. Im Falle von Saaze wird die Ausführungsgeschwindigkeit dreimal langsamer bei Simplified Saaze und bis zu siebenmal langsamer bei Saaze.</p>
<p>Die Ausgabe von XHProf ist eine Web-Seite mit einer großen Tabelle. Jede Zeile der Tabelle enthält für jede PHP Funktion die Anzahl der Aufrufe und die verbrauchte CPU-Zeit. Man kann dann per drill-down in die PHP Funktion reinklicken und sieht dann, was diese Funktion wiederum aufgerufen hat, d.h. wie sich der CPU-Verbrauch dieser PHP Funktion zusammensetzt. Die Tabelle kann man auch nach unterschiedlichen Spalten sortieren lassen.</p>
<p>In unserem Fall stellt man nun fest, daß Saaze von vier Plagen befallen ist:</p>
<ol>
<li>Parsedown-Extra -- das war zu erwarten und das hatten wir bereits ausgemerzt</li>
<li>Blade Template Verarbeitung</li>
<li>Yaml-Parser</li>
<li>Doppel und Dreifachberechnungen von bereits berechneten Werten</li>
</ol>
<p>Die beiden Problemfälle 2 und 3 wurden nun im Rahmen der Reduktion der Abhängigkeiten bereinigt. Die exorbitant hohe Anzahl von Funktionsaufrufen für Parsedown sind in Saaze einfach ein Fehler, weil Dinge, die schon vormals berechnet wurden, immer wieder neu berechnet werden. Dieser Bug in Saaze ist aber Saaze spezifisch und ließ sich durch eine PHP Referenz lösen. Für das Thema Performane Tuning ist lediglich wichtig, daß der Profiler das geeigneteMittel ist, um überhaupt zu erkennen, daß man ein Problem mit der <em>Anzahl</em> der Aufrufe hat.</p>
<h2>Reduktion von Abhängigkeiten</h2>
<p>Schon bei der Installation von Saaze war aufgefallen, daß Saaze Abhängigkeiten hat, die empfindlich auf Versionsänderungen reagieren. Diesen und anderen Abhängigkeiten galt es nun zu Leibe zu rücken. Insbesondere da mit XHProf augenscheinlich wurde, daß der Yaml-Parser und die Blade Template Engine prozentual viel Rechenzeit verbrauchen.</p>
<p>Was ist nun schlimm mit Abhängigkeiten? Nun, wenn eine Abhängigkeit für eine konkrete Problemlösung benutzt wird, dann ist dagegen nichts grundsätzlich zu sagen. In unserem Beispiel wurde eine Abhängigkeit zu <code>jenssegers\blade</code> hergestellt. Will man Blade Templates, dann muß man das entweder selber programmieren, oder man findet etwas bereits vorhandenes. Nachteilig ist nun, daß eine Abhängigkeit wiederum weitere Abhängigkeiten einschleppen kann. Hier gilt nun die Regel, je mehr Code man importiert, desto höher ist auch die Wahrscheinlichkeit, daß man damit Fehler und Malware importiert.</p>
<p>Ein bekanntes Beispiel, wo diese Abhängigkeitskaskade so richtig schief gegangen ist, war als in den beiden JavaScript Bibliotheken coa und rc in npm absichtlich platzierte Malware gefunden wurde, siehe <a href="https://therecord.media/malware-found-in-coa-and-rc-two-npm-packages-with-23m-weekly-downloads">Malware found in coa and rc</a> /26/. Diese beiden Pakete hatten wöchentliche Downloadzahlen von 23 Millionen. Es gibt nun sogar <a href="https://drewdevault.com/2021/11/16/Cash-for-leftpad.html">Geldprämien</a> /27/, wenn man Trivial-npm's eliminiert. Obwohl dieses abschreckende Beispiel für npm galt, so gilt ähnliches für PHP.</p>
<p>Oben hatte ich bereits erwähnt, daß zahlreiche Open Source Projekte angelegt werden, aber nach kurzer Zeit das Interesse daran vom Originalautor erlahmt. Der Originalautor wendet sich ab und die Software wird nicht weiterentwickelt, evtl. Fehler werden nicht behoben, auf Fragen von Anwendern wird nicht reagiert. Das nennt man dann Abandonware. Im Falle von Abhängigkeiten muß man nun damit rechnen, daß entweder die Abhängigkeit selber, oder in der Kette der Abhängigkeiten eine solche tote Stelle auftritt. Fehler in dieser Totstelle können dann zu Problemen in allen abhängigen Modulen führen. In Saaze war übrigens eine Software von Spatie so ein Problemfall: Die Aufteilung einer Datei in Frontmatter und Markdown war fehlerhaft. Fehlermeldungen dazu blieben aber unberücksichtigt. Hier muß man dann die Abhängigkeit komplett entfernen und eigenen, korrekten Code einfügen. Abandonware ist keine Eigenheit, die man daran festmachen kann, ob jemand etwas als Hobby oder beruflich erstellt hat. Es gibt zahlreiche Firmen, die Software als Open Source bereitstellen, sie aber nicht weiter pflegen, sondern &quot;vergammeln&quot; lassen. In Deutschland hat dies sogar den Gesetzgeber auf den Plan gerufen, weil ungewartete Software auch ein Sicherheitsrisiko darstellen kann.</p>
<p>Zurück zu Blade Templates: Benötigt ein auf PHP basierender Static Site Generator ein separates Template-Verfahren, oder ist PHP nicht selber schon eine Template-Sprache? Man kann hierzu geteilter Meinung sein, klar ist jedoch, daß PHP alle Anforderungn grundsätzlich abdeckt. D.h. der Verzicht auf Blade führt zu keinen funktionalen Einschränkungen. In unserem Fall von Saaze führt dies zu einer <em>Vervielfachung</em> der Performance, d.h. die Steigerung der Performance nicht um Prozentpunkte, sondern um Faktoren.</p>
<p>Anderes Beispiel für Abhängigkeiten: Was ist einfacher zu codieren und was ist einfacher zu verstehen?</p>
<pre class="line-numbers"><code class="language-PHP">protected function loadMkdwnRecursive(string $dir) : void {	// recursively load Markdown files: *.md
    foreach (scandir($dir) as $fn) {
        if ($fn === '.' || $fn === '..') continue;
        $fn = $dir . DIRECTORY_SEPARATOR . $fn;
        if (is_dir($fn)) $this-&gt;loadMkdwnRecursive($fn);
        else if (substr($fn,-3) === '.md') $this-&gt;loadEntry($fn);
    }
}
</code></pre>
<p>Alternativ mit einer Abhängigkeit zu Symfony:</p>
<pre class="line-numbers"><code class="language-PHP">use Symfony\Component\Finder\Finder;

...
$paths = (new Finder())-&gt;in($collectionDir)-&gt;files()-&gt;name('*.md');

foreach ($paths as $file) {
    $this-&gt;loadEntry($file-&gt;getPathname());
}
</code></pre>
<p>Bei der Variante, die nur PHP Bordmittel einsetzt, ist genau klar, was die Routine tut. Bei der Symfony Variante sollte man sich zuvor unterrichten, welche Funktionalität die <a href="https://symfony.com/doc/current/components/finder.html"><code>Finder</code> Klasse</a> /28/ bereitstellt. Von der Performance sollte es keine Unterschiede geben. Bei Simplified Saaze wurde die abhängigkeitsfreie Variante gewählt.</p>
<p>Wenn PHP bereits Yaml-Parsing bereitstellt, so liegt es nahe dies auch direkt zu verwenden, anstatt <code>Symfony\Component\Yaml\Yaml</code>. Durch die Verwendung der PECL Yaml Bibliothek ließ sich die Laufzeit um 40% reduzieren. Der Aufruf ohne Symfony:</p>
<pre class="line-numbers"><code class="language-PHP">yaml_parse(...);
</code></pre>
<p>Mit Symfony:</p>
<pre class="line-numbers"><code class="language-PHP">Yaml::parse(...);
</code></pre>
<p>D.h. die Vermeidung dieser Abhängigkeit ist simpel.</p>
<p>Die Installation der PECL Yaml Bibliothek ist wie folgt:</p>
<ol>
<li>Download des aktuellen yaml Pakets von <a href="https://pecl.php.net/package/yaml">PECL</a> /29/</li>
<li><code>tar zxf yaml...</code></li>
<li>Aufruf <code>phpize</code></li>
<li>Aufruf <code>./configure</code></li>
<li>Aufruf <code>make</code>. Shared Library ist hier <code>modules/yaml.so</code>.</li>
<li>Aufruf <code>make test</code>. Damit werden 74 Tests durchgeführt, welche alle erfolgreich sind.</li>
<li>Als User root kopiert man <code>modules/yaml.so</code> nach <code>/usr/lib/php/modules</code> in Arch Linux</li>
<li>Änderung <code>/etc/php/php.ini</code> und hinzufügen <code>extension=yaml</code></li>
</ol>
<p>Nun sollte man einen yaml Eintrag sehen, wenn man <code>phpinfo()</code> aufruft oder <code>php -m</code> oder <code>php -i</code>.
<img src="/img/phpyaml.png" alt=""></p>
<p>Wie bereits erwähnt, so ist ein Nachteil der PECL Pakete, daß man bei einer neuen PHP Version das obige Verfahren wiederholen muß, sofern die PHP Version nicht ohnehin mit den gewünschten PECL Paketen bereits bestückt ist.</p>
<p>Es gab eine Reihe von Abhängigkeiten, die in Saaze ausgebaut wurden. Dies hatte aber weniger etwas mit Performance Optimierung zu tun. Beispielsweise wurde ein Dependency Injection Framework ausgebaut. Bei einer Code Größe von ca. 1 kLine scheint DI etwas überdimensioniert.</p>
<h2>Ist PHP eigentlich schnell genug?</h2>
<p>Wenn man kurz innehält, kann man fragen, ob die Programmiersprache PHP überhaupt geeignet ist, wenn es um das Thema Geschwindigkeit geht. Bekannt ist, daß beim Umstieg von PHP5 auf PHP7 erhebliche Geschwindigkeitsvorteile zutage traten. Oder anders formuliert, PHP5 war niemals schnell.</p>
<p>Nachfolgende Tabelle enthält die Laufzeiten auf drei verschiedenen Maschinen, NUC (Intel), Ryzen (AMD) und Odroid (ARM). Es wird das sogenannte <em>n</em>-Damen Problem nicht-rekursiv gelöst. Also, wie positioniert man <em>n</em> Damen auf einem Schachbrett, sodaß sich keine der Damen schlagen können. In untenstehender Tabelle wird das <em>n</em>-Damen Problem für eins bis zwölf gelöst. Bei mehr als zwölf fangen Python und Perl an zu schwächeln und es dauert arg lange.</p>
<table>
<thead>
<tr>
<th>Sprache</th>
<th>NUC</th>
<th>Ryzen</th>
<th>Odroid</th>
</tr>
</thead>
<tbody>
<tr>
<td>C</td>
<td>0.17</td>
<td>0.15</td>
<td>0.44</td>
</tr>
<tr>
<td>Java 1.8.0</td>
<td>0.31</td>
<td>0.22</td>
<td>108.17</td>
</tr>
<tr>
<td>node.js 16.4</td>
<td>0.34</td>
<td>0.21</td>
<td>1.67</td>
</tr>
<tr>
<td>LuaJIT</td>
<td>0.49</td>
<td>0.33</td>
<td>2.06</td>
</tr>
<tr>
<td>PyPy3 7.3.5</td>
<td>1.57</td>
<td>0.86</td>
<td>n/a</td>
</tr>
<tr>
<td>PHP 8</td>
<td>3.23</td>
<td>2.35</td>
<td>42.38</td>
</tr>
<tr>
<td>Python 3.9.6</td>
<td>12.29</td>
<td>7.65</td>
<td>168.17</td>
</tr>
<tr>
<td>Perl 5.34</td>
<td>25.87</td>
<td>21.14</td>
<td>209.47</td>
</tr>
</tbody>
</table>
<p>Erkenntnisse:</p>
<ol>
<li>C ist bei weitem am schnellsten, bis zu einem Faktor von zwei auf Intel zu seinen beiden nächsten Konkurrenten: Java and Javascript. Auf einem Ryzen ist die Differenz nicht so ausgeprägt.</li>
<li>Javascript und Java sind fast gleich von der Geschwindigkeit her -- das hätte man wohl so nicht erwartet.</li>
<li>Javas Performance auf ARM ist fürchterlich, sogar schlechter als Javascript, LuaJIT, und PHP zusammengenommen. Das bedeutet, daß aller Voraussicht nach Java auf Apple's M1 oder Amazon Graviton nicht performant laufen wird.</li>
<li><a href="https://luajit.org/contact.html">Michael Pall</a>s /14/ LuaJIT ist ein starker Konkurrent zu allen anderen Sprachen.</li>
<li>PyPy ist mehr als siebenmal schneller als Python.</li>
<li>PHP 8 ist deutlich schneller als Python, aber fast zehnmal langsamer als Javascript. Dies ist in Übereinstimmung mit den Ergebnisse von <a href="https://thinkmobiles.com/blog/php-vs-nodejs">Viktor Korol</a> /30/ und mit den Messungen von <a href="https://blog.famzah.net/2016/09/10/cpp-vs-python-vs-php-vs-java-vs-others-performance-benchmark-2016-q3">Ivan Zahariev</a> /31/.</li>
<li>Während C ungefähr zweieinhalb-mal langsamer auf ARM als auf Intel ist, so sind die anderen Sprachen überproportional langsamer, also Faktor 5, 6, 7, 8-mal langsamer. Java ist hier mit dem Faktor von nahe 500 ein krasser Ausreißer.</li>
</ol>
<p>Das PHP Programm für das <em>n</em>-Damen Problem ist:</p>
<pre class="line-numbers"><code class="language-PHP">&lt;?php
/* Check if k-th queen is attacked by any other prior queen.
   Return nonzero if configuration is OK, zero otherwise.
*/
function configOkay (int $k, &amp;$a) {
    $z = $a[$k];

    for ($j=1; $j&lt;$k; ++$j) {
        $l = $z - $a[$j];
        if ($l == 0  ||  abs($l) == $k - $j) return 0;
    }
    return 1;
}

function solve (int $N, &amp;$a) {  // return number of positions
    $cnt = 0;
    $k = $a[1] = 1;
    $N2 = $N;  //(N + 1) / 2;

    loop:
        if (configOkay($k,$a)) {
            if ($k &lt; $N)  { $a[++$k] = 1;  goto loop; }
            else ++$cnt;
        }
        do
            if ($a[$k] &lt; $N)  { $a[$k] += 1;  goto loop; }
        while (--$k &gt; 1);
        $a[1] += 1;
        if ($a[1] &gt; $N2) return $cnt;
        $k = 2 ;  $a[2] = 1;
    goto loop;
}
</code></pre>
<p>Puristen mögen sich an den <code>goto</code>'s stören. Endanwender, die zügig Ergebnisse wollen, freuen sich, wenn sie www nicht mit weltweitem Warten verbinden.</p>
<p>Die weiteren Programme zu diesen Messungen findet man unter <a href="https://eklausmeier.goip.de/blog/2021/07-13-performance-comparison-c-vs-java-vs-javascript-vs-luajit-vs-pypy-vs-php-vs-python-vs-perl">Performance Comparison C vs. other</a> /32/.</p>
<h2>Performance Vergleich mit Hugo und Zola</h2>
<p>Nach den Performance Optimierungen war es nun interessant zu erfahren wie sich Simplified Saaze zu den Platzhirschen verhielt. Hugo ist nach Eigenbeschreibung der schnellste Static Site Generator. Ein jüngerer Herausforderer ist Zola, früher unter dem Namen Gutenberg bekannt.</p>
<p>Man findet zwar Vergleiche zwischen Hugo und Eleventy und anderen JavaScript basierten Static Site Generatoren aber nur einen einzigen Vergleich Hugo gegen Zola. Im Vergleich zu Eleventy ist Hugo um ein <em>Vielfaches</em> schneller. Gleiches gilt für Jekyll, Gatsby, Next und Nuxt. Diese Static Site Generatoren haben keine Chance gegen Hugo. Sie sind um Faktoren langsamer. Die Ergebnisse findet man in <a href="https://css-tricks.com/comparing-static-site-generator-build-times">comparison of Eleventy vs. Gatsby vs. Hugo vs. Jekyll vs. Next vs. Nuxt</a> /33/.</p>
<p>Bevor wir die Laufzeiten für unterschiedliche Blog-Größen vergleichen, ein kurzer Vergleich der Installationsgröße unter Arch Linux für x86 und Odroid/ARM. Man erkennt deutlich, daß Simplified Saaze der kleinste Generator ist.</p>
<table>
<thead>
<tr>
<th>Generator</th>
<th align="right">Size/MB x86</th>
<th align="right">Size/MB ARM</th>
</tr>
</thead>
<tbody>
<tr>
<td>S.Saaze 1.1</td>
<td align="right">0.05</td>
<td align="right">0.05</td>
</tr>
<tr>
<td>Hugo 0.88.1</td>
<td align="right">61.01</td>
<td align="right">49.17</td>
</tr>
<tr>
<td>Zola 0.14.1</td>
<td align="right">21.33</td>
<td align="right">16.89</td>
</tr>
</tbody>
</table>
<p>In der nachfolgenden Tabelle sind alle Laufzeiten in Sekunden. x86 steht für Intel NUC i5-4250U, 4 Cores, max 2.6 GHz betrieben unter Arch Linux 5.14.14; ARM ist Cortex-A7, 8 core, big-little, max 1.5 GHz ebenfalls betrieben mit Arch Linux 4.14.180-3.
Getestet wurden alle drei Static Site Generatoren mit 13 Blog Posts, dann 347, dann 681 und schließlich mit 1349 Blog-Posts. Die Anzahl der Posts ist der entscheidende Faktor für die Laufzeit.</p>
<table>
<thead>
<tr>
<th>Generator</th>
<th align="right">#posts</th>
<th align="right">real x86</th>
<th align="right">user x86</th>
<th align="right">real ARM</th>
<th align="right">user ARM</th>
</tr>
</thead>
<tbody>
<tr>
<td>S. Saaze</td>
<td align="right">13</td>
<td align="right">0.04</td>
<td align="right">0.02</td>
<td align="right">0.09</td>
<td align="right">0.06</td>
</tr>
<tr>
<td>S. Saaze</td>
<td align="right">347</td>
<td align="right">0.15</td>
<td align="right">0.09</td>
<td align="right">0.37</td>
<td align="right">0.25</td>
</tr>
<tr>
<td>S. Saaze</td>
<td align="right">681</td>
<td align="right">0.26</td>
<td align="right">0.17</td>
<td align="right">0.64</td>
<td align="right">0.41</td>
</tr>
<tr>
<td>S. Saaze</td>
<td align="right">1349</td>
<td align="right">0.47</td>
<td align="right">0.36</td>
<td align="right">1.32</td>
<td align="right">0.86</td>
</tr>
<tr>
<td>Hugo</td>
<td align="right">13</td>
<td align="right">0.22</td>
<td align="right">0.31</td>
<td align="right">0.76</td>
<td align="right">1.47</td>
</tr>
<tr>
<td>Hugo</td>
<td align="right">347</td>
<td align="right">1.53</td>
<td align="right">4.50</td>
<td align="right">4.39</td>
<td align="right">17.73</td>
</tr>
<tr>
<td>Hugo</td>
<td align="right">681</td>
<td align="right">2.43</td>
<td align="right">7.34</td>
<td align="right">6.76</td>
<td align="right">29.88</td>
</tr>
<tr>
<td>Hugo</td>
<td align="right">1349</td>
<td align="right">3.87</td>
<td align="right">12.41</td>
<td align="right">11.83</td>
<td align="right">52.08</td>
</tr>
<tr>
<td>Zola</td>
<td align="right">13</td>
<td align="right">0.08</td>
<td align="right">0.06</td>
<td align="right">0.27</td>
<td align="right">0.23</td>
</tr>
<tr>
<td>Zola</td>
<td align="right">347</td>
<td align="right">0.36</td>
<td align="right">0.31</td>
<td align="right">1.16</td>
<td align="right">1.10</td>
</tr>
<tr>
<td>Zola</td>
<td align="right">681</td>
<td align="right">0.60</td>
<td align="right">0.58</td>
<td align="right">2.05</td>
<td align="right">1.99</td>
</tr>
<tr>
<td>Zola</td>
<td align="right">1349</td>
<td align="right">1.17</td>
<td align="right">1.09</td>
<td align="right">3.75</td>
<td align="right">3.67</td>
</tr>
</tbody>
</table>
<p>Man würde meinen, daß Static Site Generatoren, die in Go oder Rust geschrieben sind, schneller sein müßten als ein Generator in PHP. Man sieht: PHP schlägt alles aus dem Feld.</p>
<p>In der obigen Tabelle wurde zwischen Real- und User-Zeit unterschieden. Real-Zeit ist diejenige Zeit, die der Benutzer effektiv wartet, bis er sein Ergebnis bekommt. Wenn der Prozeß nur einen Kern verwendet, dann ist Real-Zeit immer größer oder gleich der User-Zeit. Wenn jedoch der Prozeß die Arbeit auf mehrere Kerne verteilen kann, dann kann die User-Zeit ein Vielfaches der Real-Zeit sein. Umgangssprachlich: Der Computer hat wie blöd parallel gerechnet, durch die Parallelisierung ist die Real-Zeit aber dann noch akzeptabel. Beispiel: Simplified Saaze benötigt für 1349 Posts auf einem ARM Prozessor an User-Zeit 0.86 Sekunden, hingegen benötigt Hugo für die gleiche Menge an Posts 52.08 Sekunden User-Zeit. Effektiv fertig war Simplified Saaze nach 1.32 Sekunden, Hugo in 11.83 Sekunden.</p>
<p>User-Zeiten sind in Hugo deutlich höher, weil Hugo Threads zur Parallelisierung nutzt. Während Hugo <em>alle</em> Kerne des vorhandenen Rechners vollständig nutzt, ist es um Faktoren langsamer als Simplified Saaze oder Zola. Weder Simplified Saaze noch Zola nutzen Threads. Sollte nun Simplified Saaze ebenfalls die Arbeit auf Threads aufteilen, dann wäre der Abstand der beiden Programme noch erheblich größer. Vom Grundsatz her wäre eine Parallelisierung in Simplified Saaze einfach zu implementieren; die sogenannten &quot;Entries&quot; und die sogenannten &quot;Collections&quot; könnten auf natürliche Weise parallel bearbeitet werden.</p>
<p>Vergleich der x86 Real- und User-Zeiten:
<img src="/img/ssgPerfRealUserx86a.png" alt=""></p>
<p>Vergleich der ARM Real- und User-Zeiten:
<img src="/img/ssgPerfRealUserARMa.png" alt=""></p>
<p>Resultate für Hugo:</p>
<ol>
<li>Hugo ist immer am langsamsten. Dies steht im Gegensatz zur Eigenbezeichnung &quot;The world’s fastest framework for building websites&quot;</li>
<li>Hugos Template Konfiguration ist etwas umständlicher</li>
<li>Hugo ist sehr CPU intensiv, man vgl. dazu auch <a href="https://eklausmeier.goip.de/blog/2017/04-24-converting-wordpress-export-file-to-hugo">Converting WordPress Export File to Hugo</a> /4/</li>
<li>Hugos Goldmark Implementierung kann leider kein originäres HTML verarbeiten</li>
<li>Zur Verteidigung von Hugo: Hugo erzeugt automatisch Syntax Highlighting via HTML Code. Das verlangsamt eindeutig die Verarbeitung. In Zola habe ich deswegen die Syntax Highlighting Durchführung via HTML Code abgeschaltet. Andernfalls wäre Zola um den Faktor zwei langsamer.</li>
</ol>
<p>Die obigen Performance Resultate zwischen Zola und Hugo sind in Übereinkunft mit den Ergebnisse in <a href="https://github.com/grego/ssg-bench">Static site generator benchmarks</a> /34/. Die Zahlen dazu:</p>
<table>
<thead>
<tr>
<th>Generator</th>
<th align="right">Zeit in ms</th>
</tr>
</thead>
<tbody>
<tr>
<td>Blade</td>
<td align="right">2.9</td>
</tr>
<tr>
<td>Zola</td>
<td align="right">29.1</td>
</tr>
<tr>
<td>Hugo</td>
<td align="right">45.7</td>
</tr>
</tbody>
</table>
<p><a href="https://www.getblades.org">Blade</a> /35/ ist ein weiterer Static Site Generator, welcher von Maroš Grego programmiert wurde. Blade ist in Rust geschrieben und verwendet das <a href="https://mustache.github.io">mustache</a> /36/ Template System. Den Static Site Generator Blade darf man nicht mit dem Blade Template System verwechseln.</p>
<p>Daß Hugo zu schlagen ist, zeigt auch ein Vergleich von <a href="https://nift.dev">Nift</a> /37/ mit Hugo. Nift schlägt Hugo um den Faktor vier für Real-Zeit. Bzgl. User-Zeit ist Hugo sechsmal langsamer, man siehe hierzu die <a href="https://hugo-vs-nift.gitlab.io">Ergebnisse</a> /38/:</p>
<table>
<thead>
<tr>
<th>Generator</th>
<th align="right">Real</th>
<th align="right">User</th>
<th align="right">Sys</th>
</tr>
</thead>
<tbody>
<tr>
<td>Nift</td>
<td align="right">1.107</td>
<td align="right">1.846</td>
<td align="right">1.982</td>
</tr>
<tr>
<td>Hugo</td>
<td align="right">4.222</td>
<td align="right">11.644</td>
<td align="right">1.276</td>
</tr>
</tbody>
</table>
<p>Nift ist in C, C++ und Lua geschrieben, Source Code zu Nift ist in <a href="https://github.com/nifty-site-manager/nsm">GitHub</a> /39/. Programmierer ist <a href="https://n-ham.com">Nicholas Ham</a> /40/.</p>
<h2>Diskussion der Ergebnisse</h2>
<p>Wie in der Einleitung erwähnt, so würde man erwarten, daß compilierte Sprachen, wie Go und Rust, die Programmiersprache PHP bei der Performance in die Schranken verweisen. Wir hatten oben in der isolierten Betrachtung gesehen, daß PHP in der Tat gegen C, Java und LuaJIT performance-mäßig keine Chance hat. Wenn man jedoch ein Gesamtsystem betrachtet, wo mehrere Komponenten zusammenspielen, dann kann man durch geschickten Aufruf von C Routinen, in unserem Fall per FFI und durch geeignete Verwendung von PHP Extensions die performance-kritischen Stellen abmildern oder sogar komplett unschädlich machen. In unserem Falle sorgen dann die optimierten C Routinen sogar für eine Geschwindigkeit, die höher ist als die von Go und Rust. Das gilt insbesondere auch für JavaScript oder Node, die zwar individuell durchaus performant sind, aber PHP mit geeigneten C Routinen saust dann doch davon. Damit keine Mißverständnisse aufkommen: Würden Hugo oder Zola ebenfalls MD4C verwenden, so würden sie ihrerseits davon entsprechend profitieren. Analog gilt das für die Verwendung des Yaml-Parsers. MD4C wurde gezielt in C entwickelt mit besonderem Augenmerk auf Geschwindigkeit und Speicherverbrauch. Dieser Aufwand und diese Sorgfalt zahlt sich natürlich aus. Manchmal hat es den Eindruck, daß die Programmierer glauben, daß nur weil etwas in C/C++, Go oder Rust programmiert sei, dann müsse es deswegen schon schnell sein. Wie sagte so schön Prof. Dr. Treusch in der Physik-Vorlesung: &quot;Es gilt das Gesetz von der Erhaltung der Mühsal&quot;.</p>
<h2>Links und Literatur</h2>
<ol>
<li><a href="https://daringfireball.net/projects/markdown">https://daringfireball.net/projects/markdown</a></li>
<li><a href="https://de.wikipedia.org/wiki/ReStructuredText">https://de.wikipedia.org/wiki/ReStructuredText</a></li>
<li><a href="https://jamstack.org/generators">https://jamstack.org/generators</a></li>
<li><a href="https://eklausmeier.goip.de/blog/2017/04-24-converting-wordpress-export-file-to-hugo">https://eklausmeier.goip.de/blog/2017/04-24-converting-wordpress-export-file-to-hugo</a></li>
<li><a href="https://eklausmeier.goip.de/blog/2017/06-19-contributing-to-hugo-static">https://eklausmeier.goip.de/blog/2017/06-19-contributing-to-hugo-static</a></li>
<li><a href="https://saaze.dev">https://saaze.dev</a></li>
<li><a href="https://gilbitron.me">https://gilbitron.me</a></li>
<li><a href="https://eklausmeier.goip.de/blog/2021/10-31-simplified-saaze/">https://eklausmeier.goip.de/blog/2021/10-31-simplified-saaze/</a></li>
<li><a href="https://www.mathjax.org">https://www.mathjax.org</a></li>
<li><a href="https://mermaid-js.github.io/mermaid">https://mermaid-js.github.io/mermaid</a></li>
<li><a href="https://codepen.io">https://codepen.io</a></li>
<li><a href="https://www.zend.com/blog/php-foreign-function-interface-ffi">https://www.zend.com/blog/php-foreign-function-interface-ffi</a></li>
<li><a href="https://luajit.org">https://luajit.org</a></li>
<li><a href="https://luajit.org/contact.html">https://luajit.org/contact.html</a></li>
<li><a href="https://www.php.net/manual/en/intro.ffi.php">https://www.php.net/manual/en/intro.ffi.php</a></li>
<li>https://www.amazon.de/-/en/Sara-Golemon/dp/067232704X &quot;Sara Golemon: Extending and Embedding PHP, Sams Publishing, 2006&quot;</li>
<li><a href="https://www.zend.com/sites/zend/files/pdfs/whitepaper-zend-php-extensions.pdf">https://www.zend.com/sites/zend/files/pdfs/whitepaper-zend-php-extensions.pdf</a></li>
<li><a href="https://github.com/erusev/parsedown-extra">https://github.com/erusev/parsedown-extra</a></li>
<li><a href="https://erusev.com">https://erusev.com</a></li>
<li><a href="https://github.com/mity/md4c">https://github.com/mity/md4c</a></li>
<li><a href="https://github.com/mity">https://github.com/mity</a></li>
<li><a href="https://talk.commonmark.org/t/why-is-md4c-so-fast-c/2520/12">https://talk.commonmark.org/t/why-is-md4c-so-fast-c/2520/12</a></li>
<li><a href="https://github.com/commonmark/cmark/blob/master/benchmarks.md">https://github.com/commonmark/cmark/blob/master/benchmarks.md</a></li>
<li><a href="https://pecl.php.net/package/xhprof">https://pecl.php.net/package/xhprof</a></li>
<li>https://en.wikipedia.org/wiki/Hack_(programming_language)</li>
<li><a href="https://therecord.media/malware-found-in-coa-and-rc-two-npm-packages-with-23m-weekly-downloads">https://therecord.media/malware-found-in-coa-and-rc-two-npm-packages-with-23m-weekly-downloads</a></li>
<li><a href="https://drewdevault.com/2021/11/16/Cash-for-leftpad.html">https://drewdevault.com/2021/11/16/Cash-for-leftpad.html</a></li>
<li><a href="https://symfony.com/doc/current/components/finder.html">https://symfony.com/doc/current/components/finder.html</a></li>
<li><a href="https://pecl.php.net/package/yaml">https://pecl.php.net/package/yaml</a></li>
<li><a href="https://thinkmobiles.com/blog/php-vs-nodejs">https://thinkmobiles.com/blog/php-vs-nodejs</a></li>
<li><a href="https://blog.famzah.net/2016/09/10/cpp-vs-python-vs-php-vs-java-vs-others-performance-benchmark-2016-q3">https://blog.famzah.net/2016/09/10/cpp-vs-python-vs-php-vs-java-vs-others-performance-benchmark-2016-q3</a></li>
<li><a href="https://eklausmeier.goip.de/blog/2021/07-13-performance-comparison-c-vs-java-vs-javascript-vs-luajit-vs-pypy-vs-php-vs-python-vs-perl">https://eklausmeier.goip.de/blog/2021/07-13-performance-comparison-c-vs-java-vs-javascript-vs-luajit-vs-pypy-vs-php-vs-python-vs-perl</a></li>
<li><a href="https://css-tricks.com/comparing-static-site-generator-build-times">https://css-tricks.com/comparing-static-site-generator-build-times</a></li>
<li><a href="https://github.com/grego/ssg-bench">https://github.com/grego/ssg-bench</a></li>
<li><a href="https://www.getblades.org">https://www.getblades.org</a></li>
<li><a href="https://mustache.github.io">https://mustache.github.io</a></li>
<li><a href="https://nift.dev">https://nift.dev</a></li>
<li><a href="https://hugo-vs-nift.gitlab.io">https://hugo-vs-nift.gitlab.io</a></li>
<li><a href="https://github.com/nifty-site-manager/nsm">https://github.com/nifty-site-manager/nsm</a></li>
<li><a href="https://n-ham.com">https://n-ham.com</a></li>
</ol>
<p><strong>Autoreninfo:</strong> Elmar Klausmeier, Jahrgang 64, war nach dem Studium der Mathematik und Informatik an der Universität Dortmund 5 Jahre in der IT-Abteilung der Westdeutschen Landesbank, heute Portigon, beschäftigt. Seit über 25 Jahren ist er bei der Sopra Steria SE Unternehmensberatung. Schwerpunktmäßig ist er in der Beratung von Banken tätig. Die Meinungen und Aussagen in diesem Artikel sind vom Autor und geben nicht notwendigerweise die Meinung des Arbeitgebers und seiner Kunden wieder.</p>
<p><img src="/img/ElmarCommerzbank.jpg" alt="Photo"></p>
	</article>
	</main>

	<br><br>
	<aside>
	<p>Share via
	<a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Feklausmeier.goip.de/blog/2022/02-25-ein-static-site-generator-in-php-schneller-als-hugo-oder-zola" title="Post on Facebook" target=_blank>Facebook</a>,
	<a href="https://twitter.com/intent/tweet?text=Ein+Static+Site+Generator+in+PHP%2C+schneller+als+Hugo+oder+Zola%0Ahttps%3A%2F%2Feklausmeier.goip.de/blog/2022/02-25-ein-static-site-generator-in-php-schneller-als-hugo-oder-zola" title="Post on Twitter" target=_blank>Twitter/&Xopf;</a>,
	<a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Feklausmeier.goip.de/blog/2022/02-25-ein-static-site-generator-in-php-schneller-als-hugo-oder-zola" title="Post on LinkedIn" target=_blank>LinkedIn</a>,
	<a href="https://www.xing.com/spi/shares/new?url=https%3A%2F%2Feklausmeier.goip.de/blog/2022/02-25-ein-static-site-generator-in-php-schneller-als-hugo-oder-zola" title="Post on Xing" target=_blank>Xing</a>,
	<a href="https://share.flipboard.com/bookmarklet/popout?v=2&amp;title=Ein+Static+Site+Generator+in+PHP%2C+schneller+als+Hugo+oder+Zola&amp;url=https%3A%2F%2Feklausmeier.goip.de/blog/2022/02-25-ein-static-site-generator-in-php-schneller-als-hugo-oder-zola" title="Post on Flipboard" target=_blank>Flipboard</a>,
	<a href="https://getpocket.com/save?url=https%3A%2F%2Feklausmeier.goip.de/blog/2022/02-25-ein-static-site-generator-in-php-schneller-als-hugo-oder-zola" title="Post on Pocket" target=_blank>Pocket</a>,
	<a href="https://reddit.com/submit?&amp;url=https%3A%2F%2Feklausmeier.goip.de/blog/2022/02-25-ein-static-site-generator-in-php-schneller-als-hugo-oder-zola&amp;title=Ein+Static+Site+Generator+in+PHP%2C+schneller+als+Hugo+oder+Zola" title="Post on Reddit" target=_blank>Reddit</a>,
	<a href="mailto:?subject=Ein+Static+Site+Generator+in+PHP%2C+schneller+als+Hugo+oder+Zola&amp;body=https%3A%2F%2Feklausmeier.goip.de/blog/2022/02-25-ein-static-site-generator-in-php-schneller-als-hugo-oder-zola" title="Send via e-mail">e-mail</a>,
	<a href="whatsapp://send?text=Ein+Static+Site+Generator+in+PHP%2C+schneller+als+Hugo+oder+Zola%0Ahttps%3A%2F%2Feklausmeier.goip.de/blog/2022/02-25-ein-static-site-generator-in-php-schneller-als-hugo-oder-zola" title="Post on WhatsApp">WhatsApp</a>
	</p>

	<p>
	<br><strong>Author: </strong>Elmar Klausmeier
	</p>
	<p><a href="/blog/2022">Index for the year 2022.</a></p>
	</aside>


	<footer>
		<p><br><br>Generated 23-Mar-25 16:47 CET (Europe/Berlin) using <a href="/blog/2021/10-31-simplified-saaze">Simplified Saaze</a>, rendered in 158.07 ms<br><br>
		</p>
	</footer>


<script>
function darkLightToggle(setLocal=1) {
	if (setLocal) {
		let dts = localStorage.getItem("dark-theme") ?? 0;
		if (dts != 1 && dts != 0) dts = 0;	// in case the user has tampered with localStorage
		localStorage.setItem("dark-theme", 1 - dts);
	}
	document.body.classList.toggle("dark-mode");
	darkLightIcon.innerHTML = document.body.classList.contains("dark-mode") ?
		'<g><path d="M58.57,25.81c-2.13-3.67-0.87-8.38,2.8-10.51c3.67-2.13,8.38-0.88,10.51,2.8l9.88,17.1c2.13,3.67,0.87,8.38-2.8,10.51 c-3.67,2.13-8.38,0.88-10.51-2.8L58.57,25.81L58.57,25.81z M120,51.17c19.01,0,36.21,7.7,48.67,20.16 C181.12,83.79,188.83,101,188.83,120c0,19.01-7.7,36.21-20.16,48.67c-12.46,12.46-29.66,20.16-48.67,20.16 c-19.01,0-36.21-7.7-48.67-20.16C58.88,156.21,51.17,139.01,51.17,120c0-19.01,7.7-36.21,20.16-48.67 C83.79,58.88,101,51.17,120,51.17L120,51.17z M158.27,81.73c-9.79-9.79-23.32-15.85-38.27-15.85c-14.95,0-28.48,6.06-38.27,15.85 c-9.79,9.79-15.85,23.32-15.85,38.27c0,14.95,6.06,28.48,15.85,38.27c9.79,9.79,23.32,15.85,38.27,15.85 c14.95,0,28.48-6.06,38.27-15.85c9.79-9.79,15.85-23.32,15.85-38.27C174.12,105.05,168.06,91.52,158.27,81.73L158.27,81.73z M113.88,7.71c0-4.26,3.45-7.71,7.71-7.71c4.26,0,7.71,3.45,7.71,7.71v19.75c0,4.26-3.45,7.71-7.71,7.71 c-4.26,0-7.71-3.45-7.71-7.71V7.71L113.88,7.71z M170.87,19.72c2.11-3.67,6.8-4.94,10.48-2.83c3.67,2.11,4.94,6.8,2.83,10.48 l-9.88,17.1c-2.11,3.67-6.8,4.94-10.48,2.83c-3.67-2.11-4.94-6.8-2.83-10.48L170.87,19.72L170.87,19.72z M214.19,58.57 c3.67-2.13,8.38-0.87,10.51,2.8c2.13,3.67,0.88,8.38-2.8,10.51l-17.1,9.88c-3.67,2.13-8.38,0.87-10.51-2.8 c-2.13-3.67-0.88-8.38,2.8-10.51L214.19,58.57L214.19,58.57z M232.29,113.88c4.26,0,7.71,3.45,7.71,7.71 c0,4.26-3.45,7.71-7.71,7.71h-19.75c-4.26,0-7.71-3.45-7.71-7.71c0-4.26,3.45-7.71,7.71-7.71H232.29L232.29,113.88z M220.28,170.87 c3.67,2.11,4.94,6.8,2.83,10.48c-2.11,3.67-6.8,4.94-10.48,2.83l-17.1-9.88c-3.67-2.11-4.94-6.8-2.83-10.48 c2.11-3.67,6.8-4.94,10.48-2.83L220.28,170.87L220.28,170.87z M181.43,214.19c2.13,3.67,0.87,8.38-2.8,10.51 c-3.67,2.13-8.38,0.88-10.51-2.8l-9.88-17.1c-2.13-3.67-0.87-8.38,2.8-10.51c3.67-2.13,8.38-0.88,10.51,2.8L181.43,214.19 L181.43,214.19z M126.12,232.29c0,4.26-3.45,7.71-7.71,7.71c-4.26,0-7.71-3.45-7.71-7.71v-19.75c0-4.26,3.45-7.71,7.71-7.71 c4.26,0,7.71,3.45,7.71,7.71V232.29L126.12,232.29z M69.13,220.28c-2.11,3.67-6.8,4.94-10.48,2.83c-3.67-2.11-4.94-6.8-2.83-10.48 l9.88-17.1c2.11-3.67,6.8-4.94,10.48-2.83c3.67,2.11,4.94,6.8,2.83,10.48L69.13,220.28L69.13,220.28z M25.81,181.43 c-3.67,2.13-8.38,0.87-10.51-2.8c-2.13-3.67-0.88-8.38,2.8-10.51l17.1-9.88c3.67-2.13,8.38-0.87,10.51,2.8 c2.13,3.67,0.88,8.38-2.8,10.51L25.81,181.43L25.81,181.43z M7.71,126.12c-4.26,0-7.71-3.45-7.71-7.71c0-4.26,3.45-7.71,7.71-7.71 h19.75c4.26,0,7.71,3.45,7.71,7.71c0,4.26-3.45,7.71-7.71,7.71H7.71L7.71,126.12z M19.72,69.13c-3.67-2.11-4.94-6.8-2.83-10.48 c2.11-3.67,6.8-4.94,10.48-2.83l17.1,9.88c3.67,2.11,4.94,6.8,2.83,10.48c-2.11,3.67-6.8,4.94-10.48,2.83L19.72,69.13L19.72,69.13z"/></g>' :
		'<g><path d="M49.06,1.27c2.17-0.45,4.34-0.77,6.48-0.98c2.2-0.21,4.38-0.31,6.53-0.29c1.21,0.01,2.18,1,2.17,2.21 c-0.01,0.93-0.6,1.72-1.42,2.03c-9.15,3.6-16.47,10.31-20.96,18.62c-4.42,8.17-6.1,17.88-4.09,27.68l0.01,0.07 c2.29,11.06,8.83,20.15,17.58,25.91c8.74,5.76,19.67,8.18,30.73,5.92l0.07-0.01c7.96-1.65,14.89-5.49,20.3-10.78 c5.6-5.47,9.56-12.48,11.33-20.16c0.27-1.18,1.45-1.91,2.62-1.64c0.89,0.21,1.53,0.93,1.67,1.78c2.64,16.2-1.35,32.07-10.06,44.71 c-8.67,12.58-22.03,21.97-38.18,25.29c-16.62,3.42-33.05-0.22-46.18-8.86C14.52,104.1,4.69,90.45,1.27,73.83 C-2.07,57.6,1.32,41.55,9.53,28.58C17.78,15.57,30.88,5.64,46.91,1.75c0.31-0.08,0.67-0.16,1.06-0.25l0.01,0l0,0L49.06,1.27 L49.06,1.27z"/></g>' ;
}
const darkLightIcon = document.querySelector("#darkLightIcon");
addEventListener('load', (event) => {
	let dst = localStorage.getItem("dark-theme");
	if (dst == 1	// explicit user request
	|| (dst == null && window.matchMedia('(prefers-color-scheme: dark)').matches )) { // as per Browser setting
		darkLightToggle(0);
	} else {
		document.body.classList.remove('dark-mode');
	}
});
</script>

	<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
	<script>mermaid.initialize({startOnLoad:true});</script>
	<script src="/jscss/prism.js"></script>


</body>
</html>
